<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  
  <!-- Build: 2025-11-11-v4 - Fix: Campo √∫ltima data parcelas -->
  
  <!-- PWA Configuration -->
  <link rel="manifest" href="/manifest.json">
  
  <!-- Theme colors for PWA - PRETO para navigation bar -->
  <meta name="theme-color" content="#000000">
  <meta name="theme-color" content="#000000" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
  
  <!-- Mobile app settings -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="application-name" content="poupA√≠">
  
  <!-- iOS settings -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="poupA√≠">
  
  <!-- Fullscreen settings -->
  <meta name="fullscreen" content="yes">
  <meta name="browsermode" content="application">
  
  <title>PoupA√≠ - Finan√ßas Pessoais</title>
  
  <!-- External Resources -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link id="phosphor-cdn" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css" crossorigin="anonymous">
  <link id="fontawesome-fallback" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" disabled>
  
  <!-- Icon Library Fallback System -->
  <script>
    (function() {
      const link = document.getElementById('phosphor-cdn');
      
      function enableFallback() {
        const faLink = document.getElementById('fontawesome-fallback');
        if (faLink) {
          faLink.disabled = false;
          faLink.onload = () => console.log('Font Awesome loaded as fallback');
          faLink.onerror = () => console.error('All icon systems failed to load');
        }
      }
      
      function verifyIcons() {
        const testIcon = document.createElement('i');
        testIcon.className = 'ph ph-check';
        testIcon.style.cssText = 'position:absolute;visibility:hidden';
        document.body.appendChild(testIcon);
        
        setTimeout(() => {
          const computed = window.getComputedStyle(testIcon, ':before');
          const hasContent = computed.content && computed.content !== 'none';
          const hasFont = computed.fontFamily.toLowerCase().includes('phosphor');
          const ok = hasContent || hasFont;
          
          document.body.removeChild(testIcon);
          
          if (!ok) {
            console.warn('Phosphor Icons failed, enabling fallback');
            enableFallback();
          }
        }, 100);
      }
      
      if (link.sheet) {
        setTimeout(verifyIcons, 50);
      } else {
        link.onload = verifyIcons;
        link.onerror = enableFallback;
        setTimeout(verifyIcons, 2000);
      }
    })();
  </script>
  
  <!-- Chart.js Library -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script>
    if (typeof Chart === 'undefined') {
      console.warn('Chart.js CDN failed, loading backup');
      document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"><\/script>');
    }
  </script>
  
  <!-- PDF Export Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
  
  <!-- Stylesheets -->
  <link href="style.css?v=20251108027" rel="stylesheet">
</head>
<body>
  <!-- Theme Color Dynamic Update -->
  <script>
    (function() {
      function updateThemeColor() {
        let meta = document.querySelector('meta[name="theme-color"]');
        if (!meta) {
          meta = document.createElement('meta');
          meta.name = 'theme-color';
          document.head.appendChild(meta);
        }
        
        // Sempre preto em todas as telas
        meta.content = '#000000';
      }
      
      updateThemeColor();
      setTimeout(updateThemeColor, 100);
      
      if ('MutationObserver' in window) {
        const observer = new MutationObserver(updateThemeColor);
        observer.observe(document.body, { 
          childList: true, 
          subtree: true, 
          attributes: true, 
          attributeFilter: ['class', 'style'] 
        });
      }
      
      // Tamb√©m atualiza quando h√° mudan√ßa de classe/estilo
      window.addEventListener('load', updateThemeColor);
    })();
  </script>
  
  <!-- Initial screen visibility control - JavaScript will determine which screen to show -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const userString = localStorage.getItem('user');
      
      if (userString) {
        // User is logged in, hide landing and auth, show dashboard
        document.getElementById('landingPage').style.display = 'none';
        document.getElementById('authScreen').style.display = 'none';
        // Dashboard will be shown by checkAuthentication function
      } else {
        // No user, show landing page
        document.getElementById('landingPage').style.display = 'block';
        document.getElementById('authScreen').style.display = 'none';
        document.getElementById('dashboard').style.display = 'none';
      }
    });
  </script>
  
  <!-- LANDING PAGE -->
  <div class="landing-page" id="landingPage">
   <div class="gradient-background">
    <div class="gradient-sphere sphere-1">
    </div>
    <div class="gradient-sphere sphere-2">
    </div>
    <div class="gradient-sphere sphere-3">
    </div>
    <div class="glow">
    </div>
    <div class="grid-overlay">
    </div>
    <div class="noise-overlay">
    </div>
    <div class="particles-container" id="particles-container">
    </div>
   </div>
   <div class="landing-header">
    <div class="landing-logo">
     <div class="landing-logo-icon">
      ‚Ç±
     </div>
     <span>
      PoupA√≠
     </span>
    </div>
    <div class="landing-nav-buttons">
     <button class="btn btn-text" onclick="openAboutPage()">Sobre N√≥s</button>
    </div>
   </div>
   <div class="landing-main">
    <h1 class="landing-title-desktop">
     Controle total das suas finan√ßas pessoais
    </h1>
    <h1 class="landing-title-mobile">
     PoupA√≠
    </h1>
    <p class="landing-subtitle landing-subtitle-desktop">
     Monitore gastos, defina metas inteligentes e simule investimentos. Diga adeus √†s planilhas complicadas e organize seu dinheiro de forma simples e intuitiva.
    </p>
    <p class="landing-subtitle landing-subtitle-mobile">
     Suas finan√ßas no piloto autom√°tico
    </p>
    <div class="landing-cta">
     <button class="btn-cta-primary" onclick="showAuth('register')">
      Come√ßar Gratuitamente
     </button>
     <button class="btn-cta-secondary" onclick="showAuth('login')">
      Fazer Login
     </button>
    </div>
   </div>
      <div class="landing-footer">
    <div class="footer-container">
     <p>&copy; 2025 poupA√≠. Finan√ßas pessoais simplificadas.</p>
    </div>
   </div>
  </div>

  <!-- About Us Page -->
  <div class="about-page" id="aboutPage">
   <div class="about-page-background">
    <div class="gradient-sphere gradient-sphere-1"></div>
    <div class="gradient-sphere gradient-sphere-2"></div>
    <div class="gradient-sphere gradient-sphere-3"></div>
    <div class="noise-overlay"></div>
    <div class="grid-overlay"></div>
   </div>

   <div class="about-page-content">
    <button class="about-back-btn" onclick="closeAboutPage()">
     <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
     </svg>
     Voltar
    </button>

    <div class="about-container">
     <div class="about-header">
      <h1>Sobre o PoupA√≠</h1>
      <p class="about-subtitle">Nossa hist√≥ria, nossa miss√£o</p>
     </div>
     
     <div class="about-content">
      <div class="about-block">
       <div class="about-icon"><i class="ph ph-lightbulb"></i></div>
       <div class="about-text">
        <p>O poupA√≠ nasceu de uma inquieta√ß√£o. A gente percebia o quanto as pessoas trabalhavam duro, mas ainda assim terminavam o m√™s com aquela sensa√ß√£o de "pra onde foi o dinheiro?". E n√£o era falta de vontade, era falta de clareza. O sistema financeiro √© cheio de termos complicados, aplicativos confusos e planilhas que mais intimidam do que ajudam. A ideia do poupA√≠ surgiu justamente pra quebrar esse ciclo e provar que cuidar do seu dinheiro pode ser simples, leve e at√© prazeroso.</p>
       </div>
      </div>

      <div class="about-block">
       <div class="about-icon"><i class="ph ph-rocket-launch"></i></div>
       <div class="about-text">
        <p>Tudo come√ßou como um experimento. A inten√ß√£o inicial era criar uma ferramenta b√°sica de controle de gastos, s√≥ pra testar se um visual mais limpo e uma linguagem mais humana fariam diferen√ßa. E fizeram. As primeiras pessoas que usaram o prot√≥tipo disseram algo que marcou: <strong>"pela primeira vez eu entendi pra onde meu dinheiro t√° indo"</strong>. Foi a√≠ que a gente percebeu que tinha algo maior nas m√£os ‚Äî algo que podia realmente mudar a rela√ß√£o das pessoas com o dinheiro.</p>
       </div>
      </div>

      <div class="about-block">
       <div class="about-icon"><i class="ph ph-wrench"></i></div>
       <div class="about-text">
        <p>Mas nem tudo foi f√°cil. Teve vers√£o que travava, funcionalidade que parecia boa e depois s√≥ confundia, e at√© um layout que fez a gente repensar tudo do zero. Foram erros que ensinaram mais do que qualquer acerto. A gente percebeu que economizar n√£o √© s√≥ sobre n√∫meros, √© sobre comportamento. √â sobre pequenas escolhas di√°rias, sobre entender o que realmente importa e sobre ter um motivo pra continuar poupando mesmo quando parece dif√≠cil.</p>
       </div>
      </div>

      <div class="about-block">
       <div class="about-icon"><i class="ph ph-sparkle"></i></div>
       <div class="about-text">
        <p>Com o tempo, o poupA√≠ foi ganhando forma e prop√≥sito. Deixou de ser apenas uma ferramenta e virou um aliado do dia a dia. Cada recurso foi pensado pra ser √∫til, n√£o pra impressionar. O foco sempre foi a praticidade: registrar gastos sem complica√ß√£o, visualizar metas de forma clara e celebrar pequenas vit√≥rias financeiras.</p>
       </div>
      </div>

      <div class="about-block highlight">
       <div class="about-icon"><i class="ph ph-heart"></i></div>
       <div class="about-text">
        <p><strong>Hoje, o poupA√≠ representa mais do que um app de finan√ßas pessoais.</strong> Ele √© o resultado de erros, testes, ideias e muita vontade de simplificar a vida financeira de quem s√≥ quer viver melhor. Porque poupar n√£o precisa ser um fardo ‚Äî pode ser o primeiro passo pra conquistar aquilo que voc√™ sempre quis, com consci√™ncia e leveza.</p>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  </div>
  <!-- AUTH SCREEN -->
  <div class="auth-screen" id="authScreen">
   <button class="auth-back-btn" onclick="backToLanding()">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
     <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
    Voltar
   </button>
   <div class="auth-box">
    <div class="auth-header">
     <h2 id="authTitle">
      Bem-vindo ao PoupA√≠
     </h2>
     <p id="authSubtitle">
      Entre para come√ßar
     </p>
    </div>
    <div id="authError"></div>
    <form id="authForm" onsubmit="handleAuth(event)">
     <div class="form-group hidden" id="nameGroup">
      <label for="name">
       Nome Completo
      </label>
      <input id="name" placeholder="Seu nome" type="text"/>
     </div>
     <div class="form-group">
      <label for="email">
       E-mail
      </label>
      <input id="email" placeholder="seu@email.com" required="" type="email" autocomplete="off"/>
     </div>
     <div class="form-group">
      <label for="password">
       Senha
      </label>
      <div class="password-input-wrapper">
       <input id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required="" type="password" autocomplete="off" oninput="checkPasswordStrength()"/>
       <button type="button" class="toggle-password" onclick="togglePasswordVisibility()" aria-label="Mostrar senha">
        <svg id="eyeIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
         <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
         <circle cx="12" cy="12" r="3"></circle>
        </svg>
       </button>
      </div>
      <!-- Indicador de For√ßa da Senha -->
      <div id="passwordStrengthIndicator" class="password-strength-indicator hidden">
        <div class="strength-bars">
          <div class="strength-bar"></div>
          <div class="strength-bar"></div>
          <div class="strength-bar"></div>
          <div class="strength-bar"></div>
        </div>
        <p class="strength-text" id="passwordStrengthText">Digite uma senha</p>
      </div>
     </div>
     <div class="form-group hidden" id="confirmPasswordGroup">
      <label for="confirmPassword">
       Confirmar Senha
      </label>
      <div class="password-input-wrapper">
       <input id="confirmPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" type="password" autocomplete="off"/>
       <button type="button" class="toggle-password" onclick="toggleConfirmPasswordVisibility()" aria-label="Mostrar senha">
        <svg id="eyeIconConfirm" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
         <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
         <circle cx="12" cy="12" r="3"></circle>
        </svg>
       </button>
      </div>
     </div>
     <button class="btn-primary-large" style="width: 100%; margin-top: 1rem;" type="submit">
      <span id="authButtonText">
       Entrar
      </span>
     </button>
    </form>
    <div class="auth-switch">
     <p id="authSwitchText">
      N√£o tem uma conta?
      <a onclick="toggleAuthMode()">
       Criar conta
      </a>
     </p>
     <p id="forgotPasswordLink" style="margin-top: 0.5rem; text-align: center;">
      <a onclick="showForgotPasswordScreen()" style="color: #3b82f6; cursor: pointer; text-decoration: underline;">
       Esqueci minha senha
      </a>
     </p>
    </div>
   </div>
  </div>

  <!-- SECTION: Security Questions Password Recovery -->
  <!-- Three-step password recovery flow using security questions authentication -->
  <div id="securityQuestionsScreen" class="auth-screen" style="display: none;">
   <button class="auth-back-btn" onclick="backToLogin()">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
     <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
    Voltar
   </button>
   
   <!-- STEP 1: Email identification for recovery process -->
   <div id="securityQuestionsStep1" class="auth-box">
    <div class="auth-header">
     <h2>Recuperar Senha</h2>
     <p id="authSubtitle">Responda suas perguntas de seguran√ßa</p>
    </div>
    <div id="securityQuestionsError1"></div>
    <form onsubmit="handleRecoveryEmailSubmit(event)">
     <div class="form-group">
      <label for="recoveryEmail">Email cadastrado</label>
      <input 
       type="email" 
       id="recoveryEmail" 
       placeholder="seu@email.com" 
       required
       autocomplete="email"
      />
     </div>
     
     <button class="btn-primary-large" style="width: 100%; margin-top: 1rem;" type="submit">
      <span>Continuar</span>
     </button>
    </form>
    <div class="auth-switch">
     <p style="text-align: center; margin-top: 1rem;">
      <button type="button" onclick="backToLogin()" style="background: none; border: none; color: #3b82f6; cursor: pointer; font-size: 0.95rem; text-decoration: underline; padding: 0.5rem;">
       ‚Üê Voltar para o login
      </button>
     </p>
    </div>
   </div>
   
   <!-- STEP 2: Security questions validation -->
   <div id="securityQuestionsStep2" class="auth-box" style="display: none;">
    <div class="auth-header">
     <h2>Perguntas de Seguran√ßa</h2>
     <p id="authSubtitle">Responda as 3 perguntas para continuar</p>
    </div>
    <div id="securityQuestionsError2"></div>
    <form onsubmit="handleSecurityAnswersSubmit(event)">
     <div class="form-group">
      <label id="securityQuestion1">1. Pergunta 1</label>
      <input 
       type="text" 
       id="securityAnswer1" 
       placeholder="Sua resposta" 
       required
       autocomplete="off"
      />
     </div>
     
     <div class="form-group">
      <label id="securityQuestion2">2. Pergunta 2</label>
      <input 
       type="text" 
       id="securityAnswer2" 
       placeholder="Sua resposta" 
       required
       autocomplete="off"
      />
     </div>
     
     <div class="form-group">
      <label id="securityQuestion3">3. Pergunta 3</label>
      <input 
       type="text" 
       id="securityAnswer3" 
       placeholder="Sua resposta" 
       required
       autocomplete="off"
      />
     </div>
     
     <button class="btn-primary-large" style="width: 100%; margin-top: 1rem;" type="submit">
      <span>Verificar Respostas</span>
     </button>
    </form>
    <div class="auth-switch">
     <p style="text-align: center; margin-top: 1rem;">
      <button type="button" onclick="goBackToEmailStep()" style="background: none; border: none; color: #3b82f6; cursor: pointer; font-size: 0.95rem; text-decoration: underline; padding: 0.5rem;">
       ‚Üê Voltar
      </button>
     </p>
    </div>
   </div>
   
   <!-- STEP 3: Password reset after successful validation -->
   <div id="securityQuestionsStep3" class="auth-box" style="display: none;">
    <div class="auth-header">
     <h2>Respostas Corretas</h2>
     <p id="authSubtitle">Agora crie sua nova senha</p>
    </div>
    <div id="securityQuestionsError3"></div>
    <form onsubmit="handleNewPasswordSubmit(event)">
     <div class="form-group">
      <label for="newPassword">Nova senha</label>
      <div class="password-input-wrapper">
       <input 
        type="password" 
        id="newPassword" 
        placeholder="M√≠nimo 6 caracteres" 
        required
        oninput="updatePasswordStrength()"
        autocomplete="new-password"
       />
       <button type="button" class="toggle-password" onclick="toggleNewPassword('newPassword')" aria-label="Mostrar senha">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
         <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
         <circle cx="12" cy="12" r="3"></circle>
        </svg>
       </button>
      </div>
     </div>
     
     <div class="form-group">
      <label for="confirmNewPassword">Confirme a nova senha</label>
      <div class="password-input-wrapper">
       <input 
        type="password" 
        id="confirmNewPassword" 
        placeholder="Digite novamente" 
        required
        autocomplete="new-password"
       />
       <button type="button" class="toggle-password" onclick="toggleNewPassword('confirmNewPassword')" aria-label="Mostrar senha">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
         <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
         <circle cx="12" cy="12" r="3"></circle>
        </svg>
       </button>
      </div>
     </div>
     
     <button class="btn-primary-large" style="width: 100%; margin-top: 1rem;" type="submit">
      <span>Redefinir Senha</span>
     </button>
    </form>
   </div>
   
  </div>  
  <!-- DASHBOARD -->
  <div class="dashboard" id="dashboard">
   <div class="app">
    <div class="app-sidebar">
     <div class="logo">
      <div class="logo-icon">
       ‚Ç±
      </div>
      <h1 class="logo-title">
       PoupA√≠
      </h1>
     </div>
     <nav class="navigation">
      <!-- Menu de navega√ß√£o principal - v3.0 Reorganizado -->
      
      <!-- SE√á√ÉO: PRINCIPAL -->
      <a class="active" href="#" onclick="showSection(event, 'overview')">
       <i class="ph ph-house"></i>
       <span>
        Vis√£o Geral
       </span>
      </a>
      
      <!-- SE√á√ÉO: FINANCEIRO -->
      <a href="#" onclick="showSection(event, 'transactions')">
       <i class="ph ph-arrows-left-right">
       </i>
       <span>
        Transa√ß√µes
       </span>
      </a>
      <a href="#" onclick="showSection(event, 'reports')">
       <i class="ph ph-chart-bar">
       </i>
       <span>
        Relat√≥rios
       </span>
      </a>
      <a href="#" onclick="showSection(event, 'market')">
       <i class="ph ph-trend-up">
       </i>
       <span>
        Mercado
       </span>
      </a>
      
      <!-- SE√á√ÉO: FERRAMENTAS -->
      <a href="#" onclick="showSection(event, 'simulators')">
       <i class="ph ph-calculator">
       </i>
       <span>
        Simuladores
       </span>
      </a>
      <a href="#" onclick="showSection(event, 'calendar')">
       <i class="ph ph-calendar">
       </i>
       <span>
        Calend√°rio
       </span>
      </a>
      <a href="#" onclick="showSection(event, 'todos')">
       <i class="ph ph-note-pencil">
       </i>
       <span>
        A Registrar
       </span>
       <span class="nav-badge" id="todoBadgeDesktop" style="display: none;">0</span>
      </a>
      
      <!-- SE√á√ÉO: SUPORTE -->
      <a href="#" onclick="showSection(event, 'education')">
       <i class="ph ph-book-open">
       </i>
       <span>
        Aprenda
       </span>
      </a>
      <a href="#" onclick="showSection(event, 'help')">
       <i class="ph ph-question">
       </i>
       <span>
        Ajuda
       </span>
      </a>
      
      <a href="javascript:void(0)" onclick="logout(); return false;" class="sidebar-logout">
       <i class="ph ph-sign-out">
       </i>
       <span>
        Sair
       </span>
      </a>
     </nav>
     <div class="sidebar-footer">
      <div>
       PoupA√≠ ¬© 2025
       <br/>
       Todos os Direitos Reservados
      </div>
     </div>
    </div>
    <div class="app-content">
     <div class="app-header">
      <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="Menu">
       <i class="ph ph-list"></i>
      </button>
      <h1 class="header-title" id="headerTitle">
       Vis√£o Geral
      </h1>
            <div class="header-actions">
        <!-- Bot√£o de Privacidade -->
        <button class="privacy-toggle-btn" onclick="togglePrivacyMode()" title="Ocultar valores">
          <i class="ph ph-eye" id="privacyIcon"></i>
        </button>

        <button class="user-profile" onclick="toggleProfile()">
          <div class="user-avatar" id="userAvatar">
          </div>
          <span id="userName">
          </span>
        </button>
      </div>
     </div>
     <div class="app-body">
      <!-- SECTION: Overview Dashboard -->
      <!-- Main financial overview displaying balance summary, transactions, goals progress and analytics -->
      <section id="sectionOverview">
       <div class="section-header">
        <h2>
         Panorama Financeiro
        </h2>
        <p>
         Vis√£o geral das suas finan√ßas e acompanhamento de metas
        </p>
       </div>

       <!-- LEVEL 1: Primary financial summary cards -->
       <div class="level-1-cards">
        <div class="stat-card stat-card-primary">
         <div class="stat-title">
          Saldo Total
         </div>
         <div class="stat-value stat-value-large" id="totalBalance">
          R$ 0,00
         </div>
         <div class="stat-footer">
          Dispon√≠vel para investir
         </div>
        </div>
        
        <div class="stat-card">
         <div class="stat-title">
          Receitas
         </div>
         <div class="stat-value" id="totalIncome">
          R$ 0,00
         </div>
         <div class="stat-footer">
          Total de receitas
         </div>
        </div>
        
        <div class="stat-card">
         <div class="stat-title">
          Despesas
         </div>
         <div class="stat-value" id="totalExpenses">
          R$ 0,00
         </div>
         <div class="stat-footer">
          Total de despesas
         </div>
        </div>
        
        <!-- Meta Mensal de Gastos (Destaque) -->
        <div class="stat-card stat-card-alert" id="monthlyLimitCard" style="display: none;">
         <div class="stat-title">
          Meta de Gastos (M√™s)
         </div>
         <div class="stat-value" id="monthlyLimitValue" style="color: #3b82f6;">
          R$ 0,00
         </div>
         <div class="stat-footer">
          <div style="margin-top: 0.5rem;">
            <div style="background: #e5e7eb; border-radius: 10px; height: 8px; overflow: hidden;">
              <div id="monthlyLimitProgress" style="background: #3b82f6; height: 100%; width: 0%; transition: width 0.3s ease;"></div>
            </div>
            <div id="monthlyLimitText" style="margin-top: 0.3rem; font-size: 0.75rem; color: #6b7280;">0% usado</div>
          </div>
         </div>
        </div>
       </div>

       <!-- N√çVEL 2: MOVIMENTA√á√ïES E DESEMPENHO -->
       <div class="level-2-cards">
         <!-- Transa√ß√µes Recentes (Card Ampliado) -->
         <div class="mini-card mini-card-wide transactions-card">
           <div class="mini-card-header">
             <i class="ph ph-swap"></i>
             <h4>Transa√ß√µes Recentes</h4>
          </div>
          <div class="mini-card-content transactions-content" id="dashboardTransactionsList">
            <div class="empty-state-mini">
              <p>Nenhuma transa√ß√£o</p>
            </div>
          </div>
        </div>

        <!-- Stack de Mini-Cards -->
        <div class="mini-cards-stack">
          <!-- Gasto M√©dio Di√°rio -->
          <div class="mini-card mini-card-compact-stack">
            <div class="mini-card-header">
              <i class="ph ph-calendar-check"></i>
              <h4>Gasto M√©dio Di√°rio</h4>
            </div>
            <div class="mini-card-content inline-metric">
              <span class="metric-value" id="avgDailyExpense">R$ 0,00</span>
              <span class="metric-subtitle" id="avgDailySubtitle">√öltimos 30 dias</span>
            </div>
          </div>

          <!-- Taxa de Poupan√ßa -->
          <div class="mini-card mini-card-compact-stack">
            <div class="mini-card-header">
              <i class="ph ph-percent"></i>
              <h4>Taxa de Poupan√ßa</h4>
            </div>
            <div class="mini-card-content inline-metric">
              <span class="metric-value" id="savingsRateValue">0%</span>
              <span class="metric-subtitle" id="savingsRateSubtitle">Do que voc√™ ganha</span>
            </div>
          </div>

          <!-- Dias at√© Sal√°rio -->
          <div class="mini-card mini-card-compact-stack">
            <div class="mini-card-header">
              <i class="ph ph-clock-countdown"></i>
              <h4>Dias at√© Sal√°rio</h4>
            </div>
            <div class="mini-card-content inline-metric">
              <span class="metric-value" id="daysToSalaryValue">--</span>
              <span class="metric-subtitle" id="daysToSalarySubtitle">Pr√≥ximo pgto</span>
            </div>
          </div>
        </div>
      </div>

      <!-- SECTION: Insights e Lembretes Verticais -->
      <!-- Exibe an√°lises financeiras autom√°ticas baseadas em padr√µes de transa√ß√µes e lembretes inteligentes para controle de gastos -->
      <div class="vertical-cards-row">
         <!-- Insights Financeiros Verticais -->
         <div class="mini-card vertical-card insights-vertical-card" id="insightsVerticalCard">
           <div class="vertical-card-header">
             <i class="ph ph-lightbulb"></i>
             <h4>INSIGHTS</h4>
           </div>
           <div class="vertical-card-content">
             <div class="vertical-card-illustration" id="insightsVerticalIcon">
               <i class="ph ph-chart-line-up"></i>
             </div>
             <div class="vertical-card-text">
               <h3 id="insightsVerticalTitle">Analisando seus dados...</h3>
               <p id="insightsVerticalDesc">Aguarde enquanto processamos suas transa√ß√µes</p>
             </div>
           </div>
         </div>

         <!-- Lembretes Inteligentes Verticais -->
         <div class="mini-card vertical-card reminders-vertical-card">
           <div class="vertical-card-header">
             <i class="ph ph-bell-ringing"></i>
             <h4>LEMBRETES</h4>
           </div>
           <div class="vertical-card-content" onclick="openAllRemindersModal()" style="cursor: pointer;">
             <div class="vertical-card-illustration" id="remindersVerticalIcon">
               <i class="ph ph-bell-simple-ringing"></i>
             </div>
             <div class="vertical-card-text">
               <h3 id="remindersVerticalTitle">Nenhum lembrete</h3>
               <p id="remindersVerticalDesc">Seus lembretes aparecer√£o aqui</p>
             </div>
           </div>
         </div>
       </div>

       <!-- Gr√°fico de Fluxo Financeiro -->
       <div class="chart-container">
        <h3 style="color: #1e40af; margin-bottom: 2rem;">
         Fluxo Financeiro
        </h3>
        
        <div style="position: relative; height: 300px; width: 100%;">
         <canvas id="mainChart">
         </canvas>
        </div>
       </div>

       <!-- N√çVEL 3: PROJE√á√ïES E AN√ÅLISES -->
       <div class="level-3-header">
         <h3>An√°lises e Proje√ß√µes</h3>
         <p>Informa√ß√µes complementares para acompanhamento</p>
       </div>
       
       <div class="level-3-cards">
         <!-- Pr√≥ximo Feriado -->
         <div class="mini-card">
           <div class="mini-card-header">
             <i class="ph ph-confetti"></i>
             <h4>Pr√≥ximo Feriado</h4>
           </div>
           <div class="mini-card-content">
             <div class="metric-value" id="nextHolidayName">Carregando...</div>
             <div class="metric-subtitle" id="nextHolidayDate">--/--/----</div>
           </div>
         </div>

         <!-- Economia Potencial -->
         <div class="mini-card">
           <div class="mini-card-header">
             <i class="ph ph-piggy-bank"></i>
             <h4>Economia Potencial</h4>
           </div>
           <div class="mini-card-content">
             <div class="metric-value" id="potentialSavings">R$ 0,00</div>
             <div class="metric-subtitle" id="savingsSubtitle">Gastos reduz√≠veis</div>
           </div>
         </div>

         <!-- Proje√ß√£o at√© Fim do M√™s -->
         <div class="mini-card">
           <div class="mini-card-header">
             <i class="ph ph-calendar-dots"></i>
             <h4>Proje√ß√£o Fim do M√™s</h4>
           </div>
           <div class="mini-card-content">
             <div class="metric-value" id="monthEndProjection">R$ 0,00</div>
             <div class="metric-subtitle" id="projectionSubtitle">Baseado em gastos atuais</div>
           </div>
         </div>

         <!-- Taxa de Crescimento -->
         <div class="mini-card">
           <div class="mini-card-header">
             <i class="ph ph-chart-line"></i>
             <h4>Tend√™ncia de Gastos</h4>
           </div>
           <div class="mini-card-content">
             <div class="metric-value" id="expenseGrowthRate">0%</div>
             <div class="metric-subtitle" id="growthRateSubtitle">vs. m√™s anterior</div>
          </div>
        </div>

        <!-- Maior Gasto do M√™s -->
        <div class="mini-card">
          <div class="mini-card-header">
            <i class="ph ph-trend-up"></i>
            <h4>Maior Gasto</h4>
          </div>
          <div class="mini-card-content">
            <div class="metric-value" id="biggestExpenseValue">R$ 0,00</div>
            <div class="metric-subtitle" id="biggestExpenseDesc">M√™s atual</div>
          </div>
        </div>
      </div>
      
       <!-- Relat√≥rio por Tipo de Despesa -->
       <div class="expense-type-report">
        <div class="report-header">
         <h3>Despesas por Tipo (M√™s Atual)</h3>
         <p class="report-subtitle">Visualize o resumo das suas despesas por categoria</p>
        </div>
        
        <div class="expense-type-cards">
         <!-- Despesas √önicas -->
         <div class="expense-type-card card-unica">
          <div class="expense-type-icon">
           <i class="ph ph-wallet"></i>
          </div>
          <div class="expense-type-info">
           <h4>Despesas √önicas</h4>
           <div class="expense-type-value" id="expenseUnicaValue">R$ 0,00</div>
           <div class="expense-type-count" id="expenseUnicaCount">0 transa√ß√µes</div>
          </div>
          <div class="expense-type-progress">
           <div class="progress-bar">
            <div class="progress-fill progress-fill-unica" id="expenseUnicaProgress" style="width: 0%"></div>
           </div>
           <span class="progress-percentage" id="expenseUnicaPercent">0%</span>
          </div>
         </div>
         
         <!-- Despesas Fixas -->
         <div class="expense-type-card card-fixa">
          <div class="expense-type-icon">
           <i class="ph ph-calendar-check"></i>
          </div>
          <div class="expense-type-info">
           <h4>Despesas Fixas</h4>
           <div class="expense-type-value" id="expenseFixaValue">R$ 0,00</div>
           <div class="expense-type-count" id="expenseFixaCount">0 transa√ß√µes</div>
          </div>
          <div class="expense-type-progress">
           <div class="progress-bar">
            <div class="progress-fill progress-fill-fixa" id="expenseFixaProgress" style="width: 0%"></div>
           </div>
           <span class="progress-percentage" id="expenseFixaPercent">0%</span>
          </div>
         </div>
         
         <!-- Despesas Parceladas -->
         <div class="expense-type-card card-parcelada">
          <div class="expense-type-icon">
           <i class="ph ph-credit-card"></i>
          </div>
          <div class="expense-type-info">
           <h4>Despesas Parceladas</h4>
           <div class="expense-type-value" id="expenseParceladaValue">R$ 0,00</div>
           <div class="expense-type-count" id="expenseParceladaCount">0 transa√ß√µes</div>
          </div>
          <div class="expense-type-progress">
           <div class="progress-bar">
            <div class="progress-fill progress-fill-parcelada" id="expenseParceladaProgress" style="width: 0%"></div>
           </div>
           <span class="progress-percentage" id="expenseParceladaPercent">0%</span>
          </div>
         </div>
        </div>
       </div>
      </section>
      <!-- SECTION: Transactions Management -->
      <!-- Complete transaction history with filtering by type, date range, and category -->
      <!-- Supports income tracking and three expense types: single, fixed, and installment payments -->
      <section class="hidden" id="sectionTransactions">
       <div class="section-header">
        <div class="section-title-group">
         <h2>
          <i class="ph ph-swap"></i> Todas as Transa√ß√µes
         </h2>
         <p>
          Gerencie e acompanhe todas suas receitas e despesas
         </p>
        </div>
       </div>
       
       <!-- Transaction type filters: all, income, single, fixed, installment expenses -->
       <!-- Filtros de Tipo com Label Mobile -->
       <div class="filter-type-section">
        <div class="filter-label-mobile">
         <i class="ph ph-funnel-simple"></i>
         <span>Filtros</span>
        </div>
        <div class="expense-type-filters">
         <button class="type-filter-btn active" data-filter="all" onclick="filterByExpenseType('all')">
          <i class="ph ph-swap"></i>
          <span>Todas</span>
         </button>
         <button class="type-filter-btn" data-filter="receita" onclick="filterByExpenseType('receita')">
          <i class="ph ph-arrow-circle-up"></i>
          <span>Receitas</span>
         </button>
         <button class="type-filter-btn" data-filter="unica" onclick="filterByExpenseType('unica')">
          <i class="ph ph-wallet"></i>
          <span>√önicas</span>
         </button>
         <button class="type-filter-btn" data-filter="fixa" onclick="filterByExpenseType('fixa')">
          <i class="ph ph-repeat"></i>
          <span>Fixas</span>
         </button>
         <button class="type-filter-btn" data-filter="parcelada" onclick="filterByExpenseType('parcelada')">
          <i class="ph ph-credit-card"></i>
          <span>Parceladas</span>
         </button>
         <button class="type-filter-btn btn-clear-filters" onclick="clearFilters()" title="Limpar filtros">
          <i class="ph ph-x"></i>
          <span>Limpar</span>
         </button>
        </div>
       </div>
       
       <div class="filter-row">
        <div class="filter-section hide-on-mobile">
         <label>
          <i class="ph ph-calendar-blank"></i>
          Per√≠odo:
         </label>
         <div class="date-inputs">
          <input id="filterStartDate" type="date" placeholder="Data inicial"/>
          <span class="date-separator">
           <i class="ph ph-arrow-right"></i>
          </span>
          <input id="filterEndDate" type="date" placeholder="Data final"/>
         </div>
         <small class="form-hint" style="display: block; margin-top: 0.5rem; color: #64748b; font-size: 0.85rem;">
          <i class="ph ph-info"></i> Ex: 01/01/2025 at√© 31/01/2025
         </small>
        </div>
        <div class="filter-actions hide-on-mobile">
         <button class="btn-filter" onclick="filterTransactions()">
          <i class="ph ph-funnel"></i>
          Filtrar
         </button>
         <button class="btn-clear" onclick="clearFilters()">
          <i class="ph ph-x"></i>
          Limpar
         </button>
        </div>
       </div>
       
       <div class="button-group">
        <button class="btn-pull-todo" onclick="registerExpensesListAsTransactions()">
         <i class="ph ph-check-circle"></i>
         Registrar Lista Completa
        </button>
        <button class="btn-add-income" onclick="openAddTransactionModal('income')">
         <div class="btn-icon-wrapper">
          <i class="ph ph-arrow-circle-up"></i>
         </div>
         <div class="btn-content">
          <span class="btn-title">Nova Receita</span>
          <span class="btn-subtitle">Adicionar entrada</span>
         </div>
        </button>
        <button class="btn-add-expense" onclick="openAddTransactionModal('expense')">
         <div class="btn-icon-wrapper">
          <i class="ph ph-arrow-circle-down"></i>
         </div>
         <div class="btn-content">
          <span class="btn-title">Nova Despesa</span>
          <span class="btn-subtitle">Adicionar sa√≠da</span>
         </div>
        </button>
       </div>
       <div class="transfer-section">
        <div class="transfers" id="allTransactionsContainer">
         <div class="empty-state">
          <svg class="empty-state-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
           <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
           <path d="M8 12h8M12 8v8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <p>
           Nenhuma transa√ß√£o registrada
          </p>
          <p class="empty-state-subtitle">
           Adicione suas receitas e despesas para come√ßar
          </p>
         </div>
        </div>
       </div>
      </section>
      
      <!-- ===================================
           SECTION: A REGISTRAR (Lista de Contas)
           =================================== -->
      <section class="hidden" id="sectionTodos">
       <div class="section-header">
        <div class="section-title-group">
         <h2>
          <i class="ph ph-list-checks"></i> Lista de Contas
         </h2>
         <p>
          Anote rapidamente as despesas para registrar depois
         </p>
         <div class="section-info-alert" style="margin-top: 1rem; padding: 0.75rem 1rem; background: #eff6ff; border-left: 3px solid #3b82f6; border-radius: 8px; display: flex; align-items: start; gap: 0.75rem;">
          <i class="ph ph-info" style="color: #3b82f6; font-size: 1.25rem; margin-top: 2px;"></i>
          <p style="margin: 0; font-size: 0.9rem; color: #1e40af; line-height: 1.5;">
           <strong>Importante:</strong> Essa lista √© apenas para despesas √∫nicas. Ap√≥s registrar, elas ser√£o adicionadas como transa√ß√µes do tipo "√önica" automaticamente.
          </p>
         </div>
        </div>
        <div class="section-header-actions">
         <button class="btn-primary" onclick="openExpensesListModal()">
          <i class="ph ph-plus"></i> Adicionar
         </button>
         <button class="btn-secondary" onclick="clearExpensesList()">
          <i class="ph ph-trash"></i> Apagar Lista
         </button>
        </div>
       </div>
       
       <!-- Lista -->
       <div class="expenses-list-container" id="todosListContainer">
        <div class="empty-todos">
         <i class="ph ph-list-checks"></i>
         <h3>Lista vazia</h3>
         <p>Adicione despesas para anotar rapidamente</p>
        </div>
       </div>
       
       <!-- Rodap√© com totais -->
       <div class="expenses-list-footer">
        <div class="footer-stat">
         <span class="footer-label"><i class="ph ph-list-bullets"></i> Itens</span>
         <span class="footer-value" id="expensesListCount">0</span>
        </div>
        <div class="footer-stat">
         <span class="footer-label"><i class="ph ph-calendar"></i> Mais Recente</span>
         <span class="footer-value" id="expensesListLatest">-</span>
        </div>
        <div class="footer-stat highlight">
         <span class="footer-label"><i class="ph ph-currency-circle-dollar"></i> Total</span>
         <span class="footer-value" id="expensesListTotal">R$ 0,00</span>
        </div>
       </div>
      </section>
      
      <!-- SECTION: Financial Calendar -->
      <!-- Interactive calendar view showing daily transactions, holidays and monthly financial flow -->
      <!-- Includes color-coded legend for income, expenses (single/fixed/installment) and Brazilian holidays -->
      <section class="hidden" id="sectionCalendar">
       <div class="section-header">
        <h2>
         <i class="ph ph-calendar"></i> Calend√°rio Financeiro
        </h2>
        <p>
         Visualize suas receitas e despesas organizadas por dia
        </p>
       </div>
       <div class="calendar-container">
        <div class="calendar-header">
         <button class="btn-calendar-nav" onclick="previousMonth()">
          <i class="ph ph-caret-left"></i>
         </button>
         <h3 id="calendarMonthYear"></h3>
         <button class="btn-calendar-nav" onclick="nextMonth()">
          <i class="ph ph-caret-right"></i>
         </button>
        </div>
        <div class="calendar-legend">
         <div class="legend-item">
          <span class="legend-dot income"></span>
          <span>Receitas</span>
         </div>
         <div class="legend-item">
          <span class="legend-dot expense"></span>
          <span>Despesas √önicas</span>
         </div>
         <div class="legend-item">
          <span class="legend-dot expense-fixed"></span>
          <span>Despesas Fixas</span>
         </div>
         <div class="legend-item">
          <span class="legend-dot expense-installment"></span>
          <span>Despesas Parceladas</span>
         </div>
         <div class="legend-item">
          <span class="legend-dot holiday"></span>
          <span>Feriados</span>
         </div>
        </div>
        <div class="calendar-weekdays">
         <div>Dom</div>
         <div>Seg</div>
         <div>Ter</div>
         <div>Qua</div>
         <div>Qui</div>
         <div>Sex</div>
         <div>S√°b</div>
        </div>
        <div class="calendar-days" id="calendarDays">
         <!-- Dias ser√£o gerados dinamicamente -->
        </div>
       </div>
       <div class="calendar-day-details" id="calendarDayDetails" style="display: none;">
        <div class="day-details-header">
         <h3 id="dayDetailsTitle"></h3>
         <button class="btn-outline" onclick="closeDayDetails()">‚úï Fechar</button>
        </div>
        <div class="day-details-content" id="dayDetailsContent">
         <!-- Transa√ß√µes do dia ser√£o exibidas aqui -->
        </div>
       </div>
      </section>

      <!-- SECTION: Financial Market Data -->
      <!-- Real-time market tracking: B3 stock quotes, currency exchange, crypto prices, commodities and financial news -->
      <!-- Data sources: Brapi (Brazilian stocks), AwesomeAPI (currencies/crypto), external news aggregators -->
      <section class="hidden" id="sectionMarket">
       <div class="section-header">
        <div class="section-title-with-badge">
          <h2><i class="ph ph-chart-line-up"></i> Mercado Financeiro</h2>
        </div>
        <p>Acompanhe cota√ß√µes, an√°lises e not√≠cias do mercado em tempo real</p>
        <p style="font-size: 0.8rem; color: #9ca3af; margin-top: 0.5rem;">
          <i class="ph ph-clock"></i> Atualizado: <span id="marketLastUpdate">--</span>
        </p>
       </div>

       <!-- PRIORIDADE 1: Banner Principais A√ß√µes B3 -->
       <div class="stocks-banner">
         <div class="stocks-banner-header">
           <div>
             <h3><i class="ph ph-chart-line-up"></i> Principais A√ß√µes B3</h3>
             <p class="stocks-banner-desc">Top 12 a√ß√µes mais negociadas da bolsa brasileira</p>
           </div>
           <button onclick="event.preventDefault(); animateRefreshButton(event, updateStocksWidget)" class="btn-refresh">
             <i class="ph ph-arrow-clockwise"></i>
           </button>
         </div>
         <div class="stocks-banner-content" id="stocksGrid">
           <div class="loading-state">
             <i class="ph ph-spinner"></i>
             <span>Carregando...</span>
           </div>
         </div>
         <div class="stocks-banner-footer">
           Fonte: B3 via Brapi ‚Ä¢ <span id="stocksUpdateTime">--</span> ‚Ä¢ Delay ~15min
         </div>
       </div>

       <!-- PRIORIDADE 2: Not√≠cias do Mercado -->
       <div class="news-section" style="margin-top: 2rem;">
         <h3 class="section-subtitle-featured">
           <i class="ph ph-newspaper"></i>
           Not√≠cias do Mercado
           <span class="badge-beta">BETA</span>
         </h3>
         <div class="news-grid" id="newsGrid">
           <div class="loading-state">
             <i class="ph ph-spinner"></i>
             <span>Carregando not√≠cias...</span>
           </div>
         </div>
       </div>

       <!-- PRIORIDADE 3: Gr√°fico de Evolu√ß√£o (Grande e Destacado) -->
       <div class="main-chart-section" style="margin-top: 2rem;">
         <h3 class="section-subtitle-featured">
           <i class="ph ph-chart-line-up"></i>
           Evolu√ß√£o do Mercado
         </h3>
         <div class="main-chart-card">
           <div class="chart-header">
             <h4>Evolu√ß√£o de Pre√ßos (√öltimos 30 dias)</h4>
             <select id="mainChartSelect" class="chart-select">
               <option value="USD">üá∫üá∏ D√≥lar (USD/BRL)</option>
               <option value="EUR">üá™üá∫ Euro (EUR/BRL)</option>
               <option value="BTC">‚Çø Bitcoin (BTC/BRL)</option>
               <option value="IBOV">üìä Ibovespa</option>
             </select>
           </div>
           <canvas id="mainMarketChart" width="800" height="350"></canvas>
           <div class="chart-footer">
             <i class="ph ph-info"></i>
             <span id="chartFooterInfo">Dados dos √∫ltimos 30 dias ‚Ä¢ Fonte: AwesomeAPI</span>
           </div>
         </div>
       </div>

       <!-- PRIORIDADE 4: Conversor de Moedas -->
       <div class="converter-section" style="margin-top: 2rem;">
         <h3 class="section-subtitle-featured">
           <i class="ph ph-swap"></i>
           Conversor de Moedas
         </h3>
         <div class="currency-converter-card">
           <div class="converter-inputs">
             <div class="converter-input-group">
               <label>De</label>
               <div class="input-with-select">
                 <input type="number" id="converterAmount" value="1" min="0" step="0.01" placeholder="0.00">
                 <select id="converterFrom">
                   <option value="BRL">üáßüá∑ BRL</option>
                   <option value="USD">üá∫üá∏ USD</option>
                   <option value="EUR">üá™üá∫ EUR</option>
                   <option value="GBP">üá¨üáß GBP</option>
                 </select>
               </div>
             </div>
             
             <button class="converter-swap-btn" id="converterSwap">
               <i class="ph ph-swap"></i>
             </button>
             
             <div class="converter-input-group">
               <label>Para</label>
               <div class="input-with-select">
                 <input type="number" id="converterResult" readonly placeholder="0.00">
                 <select id="converterTo">
                   <option value="USD">üá∫üá∏ USD</option>
                   <option value="EUR">üá™üá∫ EUR</option>
                   <option value="GBP">üá¨üáß GBP</option>
                   <option value="BRL">üáßüá∑ BRL</option>
                 </select>
               </div>
             </div>
           </div>
           
           <button class="converter-btn-main" id="converterBtn">
             <i class="ph ph-calculator"></i>
             Converter
           </button>
           
           <div class="converter-info" id="converterInfo">
             <i class="ph ph-info"></i>
             <span>Taxa de c√¢mbio atualizada em tempo real via AwesomeAPI</span>
           </div>
         </div>
       </div>

       <!-- PRIORIDADE 5: Moedas e Commodities -->
       <div class="market-essentials" style="margin-top: 2rem;">
         <h3 class="section-subtitle-featured">
           <i class="ph ph-coin"></i>
           Moedas e Commodities
         </h3>
         <div class="essentials-grid">
           
           <!-- Moedas -->
           <div class="widget-card">
             <div class="widget-header">
               <h3><i class="ph ph-currency-circle-dollar"></i> Moedas Principais</h3>
               <button onclick="event.preventDefault(); animateRefreshButton(event, updateCurrencyRates)" class="btn-refresh">
                 <i class="ph ph-arrow-clockwise"></i>
               </button>
             </div>
             <div class="currency-list" id="currencyList">
               <div class="currency-item">
                 <span class="currency-name">D√≥lar (USD)</span>
                 <div class="currency-values">
                   <span class="currency-price">R$ --</span>
                   <span class="currency-change">--%</span>
                 </div>
               </div>
               <div class="currency-item">
                 <span class="currency-name">Euro (EUR)</span>
                 <div class="currency-values">
                   <span class="currency-price">R$ --</span>
                   <span class="currency-change">--%</span>
                 </div>
               </div>
               <div class="currency-item">
                 <span class="currency-name">Libra (GBP)</span>
                 <div class="currency-values">
                   <span class="currency-price">R$ --</span>
                   <span class="currency-change">--%</span>
                 </div>
               </div>
             </div>
             <div class="widget-footer">
               Fonte: AwesomeAPI ‚Ä¢ <span id="currencyUpdateTime">--</span>
             </div>
           </div>

           <!-- Commodities -->
           <div class="widget-card">
             <div class="widget-header">
               <h3>
                 <i class="ph ph-package"></i> Commodities
                 <span class="badge-beta">BETA</span>
               </h3>
               <button onclick="event.preventDefault(); animateRefreshButton(event, updateCommodities)" class="btn-refresh">
                 <i class="ph ph-arrow-clockwise"></i>
               </button>
             </div>
             <div class="currency-list" id="commoditiesList">
               <div class="currency-item">
                 <span class="currency-name">Ouro (oz)</span>
                 <div class="currency-values">
                   <span class="currency-price">US$ --</span>
                   <span class="currency-change">Spot</span>
                 </div>
               </div>
               <div class="currency-item">
                 <span class="currency-name">Petr√≥leo Brent</span>
                 <div class="currency-values">
                   <span class="currency-price">US$ --</span>
                   <span class="currency-change">Barril</span>
                 </div>
               </div>
               <div class="currency-item">
                 <span class="currency-name">Prata (oz)</span>
                 <div class="currency-values">
                   <span class="currency-price">US$ --</span>
                   <span class="currency-change">Spot</span>
                 </div>
               </div>
             </div>
             <div class="widget-footer">
               Fonte: Metals API ‚Ä¢ <span id="commoditiesUpdateTime">--</span>
             </div>
           </div>

         </div>
       </div>

      </section>

      <!-- SECTION: Financial Simulators -->
      <!-- Investment and savings calculation tools: compound interest simulator, retirement planning, goal tracking -->
      <!-- Supports CDI and SELIC rate tracking with automatic updates from Brazilian Central Bank -->
      <section class="hidden" id="sectionSimulators">
       <div class="section-header section-header-with-actions">
        <div class="section-header-content">
          <div class="section-title-with-badge">
            <h2><i class="ph ph-calculator"></i> Simuladores Financeiros</h2>
            <span class="badge-beta">BETA</span>
          </div>
          <p>Ferramentas para planejar seu futuro financeiro</p>
        </div>
        <button onclick="event.preventDefault(); animateRefreshButton(event, forceUpdateRates)" class="btn-refresh btn-refresh-large">
          <i class="ph ph-arrow-clockwise"></i>
          <span>Atualizar Taxas</span>
        </button>
       </div>

       <!-- Grid de Simuladores -->
       <div class="simulators-grid">
         
         <!-- Simulador 1: Empr√©stimo Pessoal -->
         <div class="simulator-card" onclick="openSimulator('loan')">
           <div class="simulator-icon"><i class="ph ph-credit-card"></i></div>
           <div class="simulator-content">
             <h3>Empr√©stimo Pessoal</h3>
             <p>Calcule parcelas e juros totais do seu empr√©stimo</p>
             <div class="simulator-tags">
               <span class="tag">Cr√©dito</span>
               <span class="tag">Parcelas</span>
             </div>
           </div>
           <div class="simulator-arrow">‚Üí</div>
         </div>

         <!-- Simulador 2: Juros Compostos -->
         <div class="simulator-card" onclick="openSimulator('compound')">
           <div class="simulator-icon"><i class="ph ph-currency-dollar"></i></div>
           <div class="simulator-content">
             <h3>Juros Compostos</h3>
             <p>Descubra o poder dos juros compostos no longo prazo</p>
             <div class="simulator-tags">
               <span class="tag">Aposentadoria</span>
               <span class="tag">Longo Prazo</span>
             </div>
           </div>
           <div class="simulator-arrow">‚Üí</div>
         </div>

         <!-- Simulador 3: Tempo para Meta -->
         <div class="simulator-card" onclick="openSimulator('target')">
           <div class="simulator-icon"><i class="ph ph-target"></i></div>
           <div class="simulator-content">
             <h3>Tempo para Meta</h3>
             <p>Calcule quanto tempo para atingir seu objetivo financeiro</p>
             <div class="simulator-tags">
               <span class="tag">Metas</span>
               <span class="tag">Planejamento</span>
             </div>
           </div>
           <div class="simulator-arrow">‚Üí</div>
         </div>

         <!-- Simulador 4: NOVO - Financiamento -->
         <div class="simulator-card" onclick="openSimulator('financing')">
           <div class="simulator-icon"><i class="ph ph-house"></i></div>
           <div class="simulator-content">
             <h3>Simulador de Financiamento</h3>
             <p>Calcule parcelas e juros de financiamentos imobili√°rios</p>
             <div class="simulator-tags">
               <span class="tag">Im√≥veis</span>
               <span class="tag">Ve√≠culos</span>
             </div>
           </div>
           <div class="simulator-arrow">‚Üí</div>
         </div>

         <!-- Simulador 5: Aposentadoria -->
         <div class="simulator-card" onclick="openSimulator('retirement')">
           <div class="simulator-icon"><i class="ph ph-user-circle"></i></div>
           <div class="simulator-content">
             <h3>Planejamento de Aposentadoria</h3>
             <p>Calcule quanto economizar para se aposentar confortavelmente</p>
             <div class="simulator-tags">
               <span class="tag">Futuro</span>
               <span class="tag">Previd√™ncia</span>
             </div>
           </div>
           <div class="simulator-arrow">‚Üí</div>
         </div>

         <!-- Simulador 6: NOVO - Reserva de Emerg√™ncia -->
         <div class="simulator-card" onclick="openSimulator('emergency')">
           <div class="simulator-icon"><i class="ph ph-shield-check"></i></div>
           <div class="simulator-content">
             <h3>Reserva de Emerg√™ncia</h3>
             <p>Calcule o valor ideal e tempo para construir sua reserva</p>
             <div class="simulator-tags">
               <span class="tag">Seguran√ßa</span>
               <span class="tag">Prioridade</span>
             </div>
           </div>
           <div class="simulator-arrow">‚Üí</div>
         </div>

       </div>

       <!-- Modais dos Simuladores (abrem ao clicar) -->
       
       <!-- Modal: Simulador de Investimentos -->
       <!-- Modal: Empr√©stimo Pessoal -->
       <div class="simulator-modal" id="loanModal">
         <div class="simulator-modal-content">
           <div class="simulator-modal-header">
             <div>
               <span class="simulator-modal-icon"><i class="ph ph-credit-card"></i></span>
               <h3>Calculadora de Empr√©stimo Pessoal</h3>
             </div>
             <button class="close-simulator" onclick="closeSimulator('loan')">√ó</button>
           </div>
           <p class="calculator-description">
             Simule as parcelas e o custo total do seu empr√©stimo. Veja quanto voc√™ pagar√° de juros.
           </p>
           <form onsubmit="event.preventDefault(); calculateLoan();">
             <div class="form-group">
               <label>Valor do Empr√©stimo</label>
               <input id="loanAmount" placeholder="10000" type="number" required/>
             </div>
             <div class="form-group">
               <label>Taxa de Juros Mensal (%)</label>
               <input id="loanRate" placeholder="2.5" step="0.01" type="number" required/>
             </div>
             <div class="form-group">
               <label>N√∫mero de Parcelas</label>
               <input id="loanPeriod" placeholder="12" type="number" required/>
             </div>
             <button class="btn-primary-large" type="submit">Calcular</button>
           </form>
           <div id="loanResults" style="margin-top: 2rem;"></div>
         </div>
       </div>

       <!-- Modal: Juros Compostos -->
       <div class="simulator-modal" id="compoundModal">
         <div class="simulator-modal-content">
           <div class="simulator-modal-header">
             <div>
               <span class="simulator-modal-icon"><i class="ph ph-currency-dollar"></i></span>
               <h3>Calculadora de Juros Compostos</h3>
             </div>
             <button class="close-simulator" onclick="closeSimulator('compound')">√ó</button>
           </div>
           <p class="calculator-description">
             Descubra como seu dinheiro pode crescer com o poder dos juros compostos.
           </p>
           <form onsubmit="event.preventDefault(); calculateCompoundInterest();">
             <div class="form-group">
               <label>Valor Inicial</label>
               <input id="compoundInitialAmount" placeholder="1000" type="number"/>
             </div>
             <div class="form-group">
               <label>Aporte Mensal</label>
               <input id="compoundMonthlyAmount" placeholder="100" type="number"/>
             </div>
             <div class="form-group">
               <label>Taxa de Juros (% ao m√™s)</label>
               <input id="compoundInterestRate" placeholder="1" step="0.1" type="number"/>
             </div>
             <div class="form-group">
               <label>Per√≠odo (meses)</label>
               <input id="compoundPeriod" placeholder="12" type="number"/>
             </div>
             <button class="btn-primary-large" type="submit">Calcular</button>
           </form>
           <div id="compoundResults" style="margin-top: 2rem;"></div>
         </div>
       </div>

       <!-- Modal: Tempo para Meta -->
       <div class="simulator-modal" id="targetModal">
         <div class="simulator-modal-content">
           <div class="simulator-modal-header">
             <div>
               <span class="simulator-modal-icon"><i class="ph ph-target"></i></span>
               <h3>Tempo para Meta</h3>
             </div>
             <button class="close-simulator" onclick="closeSimulator('target')">√ó</button>
           </div>
           <p class="calculator-description">
             Descubra quanto tempo levar√° para atingir seu objetivo financeiro.
           </p>
           <form onsubmit="event.preventDefault(); calculateTimeToTarget();">
             <div class="form-group">
               <label>Valor da Meta</label>
               <input id="targetAmount" placeholder="10000" type="number" required/>
             </div>
             <div class="form-group">
               <label>Valor Inicial</label>
               <input id="targetInitialAmount" placeholder="0" type="number" required/>
             </div>
             <div class="form-group">
               <label>Quanto pode Guardar por M√™s</label>
               <input id="targetMonthlyAmount" placeholder="500" type="number" required/>
             </div>
             <div class="form-group">
               <label>Taxa de Juros (% ao m√™s)</label>
               <input id="targetInterestRate" placeholder="0.5" step="0.1" type="number" required/>
             </div>
             <button class="btn-primary-large" type="submit">Calcular</button>
           </form>
           <div id="targetResults" style="margin-top: 2rem;"></div>
         </div>
       </div>

       <!-- Modal: NOVO - Financiamento -->
       <div class="simulator-modal" id="financingModal">
         <div class="simulator-modal-content">
           <div class="simulator-modal-header">
             <div>
               <span class="simulator-modal-icon"><i class="ph ph-calculator"></i></span>
               <h3>Calculadora de Parcelas</h3>
             </div>
             <button class="close-simulator" onclick="closeSimulator('financing')">√ó</button>
           </div>
           <p class="calculator-description">
             Descubra quantas parcelas cabem no seu bolso para um financiamento ou compra parcelada.
           </p>
           <form onsubmit="event.preventDefault(); calculateFinancing();">
             <div class="form-group">
               <label>üí∞ Valor Total do Bem</label>
               <input id="financingAmount" placeholder="Ex: 30000" type="number" required/>
               <small style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem; display: block;">
                 Valor total que voc√™ precisa financiar ou parcelar
               </small>
             </div>
             <div class="form-group">
               <label>üí≥ Valor que Cabe no Or√ßamento (por m√™s)</label>
               <input id="financingMonthlyBudget" placeholder="Ex: 1200" type="number" required/>
               <small style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem; display: block;">
                 Quanto voc√™ consegue pagar confortavelmente por m√™s
               </small>
             </div>
             <div class="form-group">
               <label>üìÖ Prazo M√°ximo Desejado (meses)</label>
               <select id="financingMaxPeriod" style="width: 100%; padding: 0.75rem; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 0.95rem;">
                 <option value="12">12 meses (1 ano)</option>
                 <option value="24" selected>24 meses (2 anos)</option>
                 <option value="36">36 meses (3 anos)</option>
                 <option value="48">48 meses (4 anos)</option>
                 <option value="60">60 meses (5 anos)</option>
               </select>
             </div>
             <button class="btn-primary-large" type="submit">
               <i class="ph ph-calculator"></i> Calcular Parcelas
             </button>
           </form>
           <div id="financingResults" style="margin-top: 2rem;"></div>
         </div>
       </div>

       <!-- Modal: Aposentadoria -->
       <div class="simulator-modal" id="retirementModal">
         <div class="simulator-modal-content">
           <div class="simulator-modal-header">
             <div>
               <span class="simulator-modal-icon"><i class="ph ph-user-circle"></i></span>
               <h3>Planejamento de Aposentadoria</h3>
             </div>
             <button class="close-simulator" onclick="closeSimulator('retirement')">√ó</button>
           </div>
           <p class="calculator-description">
             Calcule quanto voc√™ precisa economizar mensalmente para se aposentar confortavelmente.
           </p>
           <form onsubmit="event.preventDefault(); calculateRetirement();">
             <div class="form-group">
               <label>Idade Atual</label>
               <input id="retirementCurrentAge" placeholder="30" type="number" required/>
             </div>
             <div class="form-group">
               <label>Idade para Aposentadoria</label>
               <input id="retirementTargetAge" placeholder="65" type="number" required/>
             </div>
             <div class="form-group">
               <label>Renda Mensal Desejada na Aposentadoria</label>
               <input id="retirementMonthlyIncome" placeholder="5000" type="number" required/>
             </div>
             <div class="form-group">
               <label>Patrim√¥nio Atual</label>
               <input id="retirementCurrentWealth" placeholder="0" type="number" required/>
             </div>
             <div class="form-group">
               <label>Rentabilidade Esperada (% ao ano)</label>
               <input id="retirementReturnRate" placeholder="8" step="0.1" type="number" required/>
             </div>
             <button class="btn-primary-large" type="submit">Calcular</button>
           </form>
           <div id="retirementResults" style="margin-top: 2rem;"></div>
         </div>
       </div>

       <!-- Modal: NOVO - Reserva de Emerg√™ncia -->
       <div class="simulator-modal" id="emergencyModal">
         <div class="simulator-modal-content">
           <div class="simulator-modal-header">
             <div>
               <span class="simulator-modal-icon"><i class="ph ph-shield-check"></i></span>
               <h3>Calculadora de Reserva de Emerg√™ncia</h3>
             </div>
             <button class="close-simulator" onclick="closeSimulator('emergency')">√ó</button>
           </div>
           <p class="calculator-description">
             Descubra quanto voc√™ precisa guardar e em quanto tempo conseguir√° construir sua reserva de emerg√™ncia.
           </p>
           <form onsubmit="event.preventDefault(); calculateEmergencyFund();">
             <div class="form-group">
               <label>üí∏ Gastos Mensais Essenciais</label>
               <input id="emergencyMonthlyExpenses" placeholder="Ex: 3000" type="number" required/>
               <small style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem; display: block;">
                 Considere: moradia, alimenta√ß√£o, transporte, sa√∫de, contas b√°sicas
               </small>
             </div>
             <div class="form-group">
               <label>üìÖ Meses de Cobertura Desejados</label>
               <select id="emergencyMonths" style="width: 100%; padding: 0.75rem; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 0.95rem;">
                 <option value="3">3 meses - M√≠nimo recomendado</option>
                 <option value="6" selected>6 meses - Ideal para a maioria</option>
                 <option value="9">9 meses - Conservador</option>
                 <option value="12">12 meses - Extra seguro</option>
               </select>
               <small style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem; display: block;">
                 Recomenda√ß√£o: 6 meses para empregados CLT, 12 meses para aut√¥nomos
               </small>
             </div>
             <div class="form-group">
               <label>üí∞ Valor J√° Guardado</label>
               <input id="emergencyCurrentAmount" placeholder="Ex: 5000 (ou 0 se come√ßando do zero)" type="number" required/>
             </div>
             <div class="form-group">
               <label>üè¶ Quanto Consegue Guardar por M√™s</label>
               <input id="emergencyMonthlySavings" placeholder="Ex: 500" type="number" required/>
               <small style="color: #64748b; font-size: 0.85rem; margin-top: 0.25rem; display: block;">
                 Valor que voc√™ consegue destinar mensalmente para a reserva
               </small>
             </div>
             <button class="btn-primary-large" type="submit">
               <i class="ph ph-calculator"></i> Calcular Reserva
             </button>
           </form>
           <div id="emergencyResults" style="margin-top: 2rem;"></div>
         </div>
       </div>

      </section>
      <!-- SECTION: Financial Reports and Analytics -->
      <!-- Comprehensive financial analysis with charts, export capabilities (PDF/Excel), and monthly review summaries -->
      <!-- Includes category breakdown, spending trends, expense type analysis, and budget performance metrics -->
      <section class="hidden" id="sectionReports">
       <!-- Header Minimalista -->
       <div class="section-header">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <h2><i class="ph ph-chart-line-up"></i> Relat√≥rios e An√°lises</h2>
            <p>Vis√£o completa do seu comportamento financeiro</p>
          </div>
          <div class="export-buttons">
            <button class="btn-export btn-export-monthly" onclick="reopenMonthlyReview()">
              <i class="ph ph-calendar-check"></i>
              <span>Resumo do M√™s</span>
            </button>
            <button class="btn-export btn-export-pdf" onclick="exportToPDF()">
              <i class="ph ph-file-pdf"></i>
              <span>Exportar PDF</span>
            </button>
            <button class="btn-export btn-export-excel" onclick="exportToExcel()">
              <i class="ph ph-file-xls"></i>
              <span>Exportar Excel</span>
            </button>
          </div>
        </div>
       </div>

       <!-- Filtros de Per√≠odo Minimalista -->
       <div class="report-filters-minimal">
          <label class="filter-label-minimal">
            <i class="ph ph-funnel"></i>
            Filtrar por:
          </label>
          <div class="filter-buttons-minimal">
            <button class="filter-btn-minimal active" onclick="changeReportPeriod('7days')" data-period="7days">M√™s Atual</button>
            <button class="filter-btn-minimal" onclick="changeReportPeriod('30days')" data-period="30days">M√™s Completo</button>
            <button class="filter-btn-minimal" onclick="changeReportPeriod('3months')" data-period="3months">3 Meses</button>
            <button class="filter-btn-minimal" onclick="changeReportPeriod('6months')" data-period="6months">6 Meses</button>
            <button class="filter-btn-minimal" onclick="changeReportPeriod('1year')" data-period="1year">Ano Inteiro</button>
          </div>
       </div>

       <!-- Resumo Visual Principal (Grid 4 Colunas) -->
       <div class="report-summary-grid">
         <div class="summary-card summary-balance">
           <div class="summary-header-row">
             <span class="summary-label">Saldo do Per√≠odo</span>
             <i class="ph ph-info summary-info-icon" onclick="showCardExplanation('saldo')"></i>
           </div>
           <h3 class="summary-value" id="summaryBalance">R$ 0,00</h3>
           <span class="summary-trend" id="summaryBalanceStatus">
             Calculando...
           </span>
         </div>

         <div class="summary-card summary-income">
           <div class="summary-header-row">
             <span class="summary-label">Receitas</span>
             <i class="ph ph-info summary-info-icon" onclick="showCardExplanation('receitas')"></i>
           </div>
           <h3 class="summary-value" id="summaryIncome">R$ 0,00</h3>
           <span class="summary-trend" id="summaryIncomeTrend">
             Total de receitas
           </span>
         </div>

         <div class="summary-card summary-expenses">
           <div class="summary-header-row">
             <span class="summary-label">Despesas</span>
             <i class="ph ph-info summary-info-icon" onclick="showCardExplanation('despesas')"></i>
           </div>
           <h3 class="summary-value" id="summaryExpenses">R$ 0,00</h3>
           <span class="summary-trend" id="summaryExpensesTrend">
             Total de despesas
           </span>
         </div>

         <div class="summary-card summary-average">
           <div class="summary-header-row">
             <span class="summary-label">Meta de Gastos</span>
             <i class="ph ph-info summary-info-icon" onclick="showCardExplanation('meta')"></i>
           </div>
           <h3 class="summary-value" id="summaryAverage">R$ 0,00 / R$ 5.000,00</h3>
           <div class="progress-bar-wrapper">
             <div class="progress-bar" id="metaProgressBar"></div>
           </div>
           <span class="summary-trend" id="summaryProjection">
             Calculando...
           </span>
         </div>
       </div>

       <!-- Gr√°ficos Side by Side -->
       <div class="charts-row">
         <!-- Gr√°fico de Evolu√ß√£o -->
         <div class="chart-container-minimal">
           <div class="chart-header-minimal">
             <h3>Evolu√ß√£o Temporal</h3>
             <span class="chart-subtitle" id="evolutionPeriodLabel">√öltimos 7 dias</span>
           </div>
           <div class="chart-canvas-wrapper">
             <canvas id="evolutionChart"></canvas>
           </div>
         </div>

         <!-- Gr√°fico de Categorias -->
         <div class="chart-container-minimal">
           <div class="chart-header-minimal">
             <h3>Distribui√ß√£o por Categoria</h3>
             <span class="chart-subtitle">Propor√ß√£o de gastos</span>
           </div>
           <div class="chart-canvas-wrapper">
             <canvas id="categoryPieChart"></canvas>
           </div>
         </div>
       </div>

       <!-- Padr√µes de Consumo (Fora das tabs) -->
       <div class="chart-container-minimal" style="margin-bottom: 2rem;">
         <div class="chart-header-minimal">
           <h3>Padr√µes de Consumo</h3>
           <span class="chart-subtitle">An√°lise do seu comportamento financeiro</span>
         </div>
         <div class="patterns-grid" id="patternsGrid">
           <!-- Ser√° preenchido dinamicamente -->
         </div>
       </div>

       <!-- An√°lises Avan√ßadas (Tabs) -->
       <div class="advanced-analysis">
         <div class="analysis-tabs">
           <button class="analysis-tab active" onclick="switchAnalysisTab('predictions')" data-tab="predictions">
             <i class="ph ph-crystal-ball"></i> Previs√µes
           </button>
           <button class="analysis-tab" onclick="switchAnalysisTab('timeline')" data-tab="timeline">
             <i class="ph ph-calendar-dots"></i> Linha do Tempo
           </button>
           <button class="analysis-tab" onclick="switchAnalysisTab('categories')" data-tab="categories">
             <i class="ph ph-chart-pie-slice"></i> An√°lise por Categoria
           </button>
         </div>

         <!-- Tab: Previs√µes -->
         <div class="analysis-content" id="tabPredictions">
           <div class="predictions-grid" id="predictionsGrid">
             <!-- Ser√° preenchido dinamicamente -->
           </div>
         </div>

         <!-- Tab: Linha do Tempo -->
         <div class="analysis-content hidden" id="tabTimeline">
           <div class="timeline-container" id="timelineContainer">
             <!-- Ser√° preenchido dinamicamente -->
           </div>
         </div>

         <!-- Tab: An√°lise por Categoria -->
         <div class="analysis-content hidden" id="tabCategories">
           <div class="categories-analysis" id="categoriesAnalysis">
             <!-- Ser√° preenchido dinamicamente -->
           </div>
         </div>
       </div>

      </section>
      <!-- SECTION: Financial Education Center -->
      <!-- Educational content library covering personal finance topics: budgeting, investing, saving strategies -->
      <!-- Article-based learning system with expandable content and practical tips for financial literacy -->
      <section class="hidden" id="sectionEducation">
       <div class="section-header">
        <h2>
         <i class="ph ph-wallet"></i> Controle Financeiro Pessoal
        </h2>
        <p>
         Aprenda a dominar seu dinheiro
        </p>
       </div>
             <div class="chart-container">
                <p style="color: #6b7280; line-height: 1.8;">
                 Controlar as finan√ßas pessoais √© como pilotar um carro. Voc√™ precisa saber para onde est√° indo, quanto combust√≠vel tem e quando √© hora de frear. Mais do que apenas economizar, trata-se de entender o caminho que o dinheiro percorre.
                </p>
             </div>

             <!-- Education hub: search, filters and cards -->
             <div class="education-hub">
                 <!-- Dica do Dia -->
                 <div class="daily-tip-card">
                     <div class="daily-tip-header">
                         <i class="ph ph-lightbulb"></i>
                         <span>Dica do Dia</span>
                     </div>
                     <p id="dailyTipText"></p>
                 </div>

                 <!-- Quick Access Buttons -->
                 <div class="education-quick-access">
                     <button class="quick-access-btn" onclick="openGlossary()">
                         <i class="ph ph-book-open"></i>
                         Gloss√°rio Financeiro
                     </button>
                     <button class="quick-access-btn" onclick="openQuizSelection()">
                         <i class="ph ph-exam"></i>
                         Quiz de Conhecimento
                     </button>
                 </div>

                 <div class="education-controls">
                     <input type="search" id="educationSearch" placeholder="Buscar artigos, ex: or√ßamento, investimentos..." oninput="renderEducationCards()" />
                     <select id="educationCategoryFilter" onchange="renderEducationCards()">
                         <option value="all">Todas as categorias</option>
                         <option value="fundamentals">Fundamentos</option>
                         <option value="budgeting">Or√ßamento</option>
                         <option value="investing">Investimentos</option>
                         <option value="credit">Cr√©dito e D√≠vidas</option>
                         <option value="behavior">Comportamento</option>
                     </select>
                 </div>

                 <div id="educationCards" class="education-cards">
                     <!-- Cards ser√£o renderizados dinamicamente -->
                 </div>

                 <!-- Article expanded view -->
                 <div id="educationArticleView" class="education-article-view" style="display:none;">
                     <button class="btn-outline" onclick="closeEducationArticle()" style="margin-bottom: 1rem;">
                         ‚Üê Voltar aos artigos
                     </button>
                     <div class="education-article-content">
                         <h2 id="articleTitle"></h2>
                         <div id="articleMeta" style="color:#6b7280; font-size:0.95rem; margin-bottom:1.5rem;"></div>
                         <div id="articleContent"></div>
                     </div>
                 </div>

                 <div style="text-align:center; margin-top:1rem;" id="loadMoreContainer">
                     <button class="btn-outline" id="loadMoreEducation" onclick="loadMoreEducation()">Carregar mais</button>
                 </div>
             </div>
      </section>

      <!-- SECTION: Help and Support Center -->
      <!-- User assistance hub: FAQ accordion, contact form with categorized issue types, tutorials and app documentation -->
      <section class="hidden" id="sectionHelp">
       <div class="section-header">
        <h2>
         <i class="ph ph-lifebuoy"></i> Central de Ajuda
        </h2>
        <p>
         Tire suas d√∫vidas e aprenda a usar o PoupA√≠
        </p>
       </div>

       <!-- Bot√£o de Novidades -->
       <div class="chart-container" style="margin-bottom: 1.5rem;">
        <button class="btn-primary" onclick="showWhatsNewModal()" style="width: 100%; padding: 1rem; font-size: 1rem; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 0.75rem; background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); border: none; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);">
         <i class="ph ph-sparkle" style="font-size: 1.5rem;"></i>
         <div style="text-align: left;">
          <div style="font-size: 1.1rem;">‚ú® O que h√° de novo?</div>
          <div style="font-size: 0.85rem; opacity: 0.9; font-weight: 500;">Vers√£o ${CURRENT_VERSION} ‚Ä¢ ${RELEASE_DATE}</div>
         </div>
         <i class="ph ph-arrow-right" style="font-size: 1.25rem; margin-left: auto;"></i>
        </button>
       </div>

       <!-- Cards de Contato R√°pido -->
       <div class="help-quick-contact">
        <div class="help-contact-card">
         <div class="help-contact-icon">
          <i class="ph ph-telegram-logo"></i>
         </div>
         <h3>Telegram</h3>
         <p>Canal de suporte via Telegram</p>
         <button class="btn-primary" onclick="openTelegramSupport()">
          <i class="ph ph-telegram-logo"></i> Abrir Telegram
         </button>
        </div>

        <div class="help-contact-card">
         <div class="help-contact-icon">
          <i class="ph ph-envelope"></i>
         </div>
         <h3>Email</h3>
         <p>Envie sua d√∫vida por email</p>
         <button class="btn-primary" onclick="openEmailSupport()">
          <i class="ph ph-paper-plane-tilt"></i> Enviar Email
         </button>
        </div>

        <div class="help-contact-card">
         <div class="help-contact-icon">
          <i class="ph ph-whatsapp-logo"></i>
         </div>
         <h3>WhatsApp</h3>
         <p>Atendimento pelo WhatsApp</p>
         <button class="btn-primary" onclick="openWhatsAppSupport()">
          <i class="ph ph-whatsapp-logo"></i> Abrir WhatsApp
         </button>
        </div>
       </div>

       <!-- FAQ - Perguntas Frequentes -->
       <div class="chart-container">
        <h3 style="color: #1e40af; margin-bottom: 1.5rem;">
         <i class="ph ph-question"></i> Perguntas Frequentes
        </h3>
        
        <div class="faq-list">
         <div class="faq-item">
          <div class="faq-question" onclick="toggleFAQ(this)">
           <span>Como adicionar uma transa√ß√£o?</span>
           <i class="ph ph-caret-down"></i>
          </div>
          <div class="faq-answer">
           <p>Para adicionar uma transa√ß√£o, clique no bot√£o <strong>"+ Nova Transa√ß√£o"</strong> no topo da tela ou v√° at√© a aba <strong>Transa√ß√µes</strong> e clique em <strong>"Adicionar"</strong>. Preencha os campos obrigat√≥rios (valor, categoria, tipo) e clique em <strong>"Salvar"</strong>.</p>
          </div>
         </div>

         <div class="faq-item">
          <div class="faq-question" onclick="toggleFAQ(this)">
           <span>Como criar uma meta financeira?</span>
           <i class="ph ph-caret-down"></i>
          </div>
          <div class="faq-answer">
           <p>Na aba <strong>Dashboard</strong>, role at√© a se√ß√£o <strong>"Suas Metas"</strong> e clique em <strong>"+ Adicionar Meta"</strong>. Defina o nome da meta, valor objetivo, data limite e quanto j√° economizou. O sistema calcular√° automaticamente quanto voc√™ precisa guardar por m√™s.</p>
          </div>
         </div>

         <div class="faq-item">
          <div class="faq-question" onclick="toggleFAQ(this)">
           <span>Como usar os simuladores financeiros?</span>
           <i class="ph ph-caret-down"></i>
          </div>
          <div class="faq-answer">
           <p>Acesse a aba <strong>Simuladores</strong> e escolha uma das 6 calculadoras dispon√≠veis: Empr√©stimo Pessoal, Juros Compostos, Tempo para Meta, Financiamento, Aposentadoria ou Reserva de Emerg√™ncia. Preencha os campos e pressione <strong>Enter</strong> ou clique em <strong>"Calcular"</strong>.</p>
          </div>
         </div>

         <div class="faq-item">
          <div class="faq-question" onclick="toggleFAQ(this)">
           <span>Como visualizar relat√≥rios e gr√°ficos?</span>
           <i class="ph ph-caret-down"></i>
          </div>
          <div class="faq-answer">
           <p>V√° at√© a aba <strong>Relat√≥rios</strong> para ver an√°lises detalhadas das suas finan√ßas. Voc√™ pode filtrar por per√≠odo (7 dias, 30 dias, 3 meses, 6 meses ou 1 ano) e visualizar gr√°ficos de evolu√ß√£o, distribui√ß√£o por categoria, maiores gastos e previs√µes.</p>
          </div>
         </div>

         <div class="faq-item">
          <div class="faq-question" onclick="toggleFAQ(this)">
           <span>O que √© o Modo Privacidade?</span>
           <i class="ph ph-caret-down"></i>
          </div>
          <div class="faq-answer">
           <p>O Modo Privacidade oculta todos os valores monet√°rios do dashboard, substituindo-os por "***". Isso √© √∫til quando voc√™ est√° usando o app em p√∫blico. Clique no √≠cone de <strong>olho</strong> no topo da tela para ativar/desativar.</p>
          </div>
         </div>

         <div class="faq-item">
          <div class="faq-question" onclick="toggleFAQ(this)">
           <span>Como funciona o Quiz de Conhecimento?</span>
           <i class="ph ph-caret-down"></i>
          </div>
          <div class="faq-answer">
           <p>Na aba <strong>Aprenda</strong>, clique em <strong>"Quiz de Conhecimento"</strong> e escolha um dos 6 temas dispon√≠veis. Responda √†s quest√µes e veja explica√ß√µes detalhadas com fontes oficiais. √â uma √≥tima forma de aprender enquanto testa seus conhecimentos!</p>
          </div>
         </div>
        </div>
       </div>

       <!-- Feedback e Sugest√µes -->
       <div class="chart-container">
        <h3 style="color: #1e40af; margin-bottom: 1.5rem;">
         <i class="ph ph-megaphone"></i> Envie seu Feedback
        </h3>
        
        <p style="color: #6b7280; margin-bottom: 1.5rem;">
         Sua opini√£o √© muito importante para n√≥s! Conte-nos o que voc√™ achou do PoupA√≠ e ajude-nos a melhorar.
        </p>

        <form onsubmit="event.preventDefault(); submitFeedback();">
         <div class="form-group">
          <label>Tipo de Feedback</label>
          <select id="feedbackType" required>
           <option value="">Selecione...</option>
           <option value="bug">üêõ Reportar Bug</option>
           <option value="feature">üí° Sugerir Funcionalidade</option>
           <option value="improvement">üîÑ Sugerir Melhoria</option>
           <option value="compliment">‚ù§Ô∏è Elogio</option>
           <option value="other">üí¨ Outro</option>
          </select>
         </div>

         <div class="form-group">
          <label>Sua Mensagem</label>
          <textarea id="feedbackMessage" rows="5" placeholder="Descreva seu feedback em detalhes..." required></textarea>
         </div>

         <div class="form-group">
          <label>Email para Contato (opcional)</label>
          <input type="email" id="feedbackEmail" placeholder="seu@email.com"/>
         </div>

         <button type="submit" class="btn-primary-large">
          <i class="ph ph-paper-plane-tilt"></i> Enviar Feedback
         </button>
        </form>
       </div>
      </section>

     </div>
    </div>
   </div>
  </div>
  
  <!-- üéâ Popup de Novidades -->
  <div class="modal" id="whatsNewModal" style="display: none;">
   <div class="modal-content whats-new-modal">
    <!-- Header fixo e minimalista -->
    <div class="whats-new-header">
     <div class="whats-new-header-content">
      <div style="display: flex; align-items: center; gap: 0.75rem;">
       <i class="ph ph-sparkle" style="font-size: 1.5rem; color: #3b82f6;"></i>
       <div>
        <h2 style="margin: 0; font-size: 1.25rem; color: #111827; font-weight: 600;">Novidades da vers√£o <span id="whatsNewVersion"></span></h2>
        <p style="margin: 0; font-size: 0.875rem; color: #6b7280;" id="whatsNewDate"></p>
       </div>
      </div>
     </div>
    </div>
    
    <!-- Conte√∫do com scroll -->
    <div class="whats-new-content">
     <!-- Corre√ß√µes -->
     <div class="whats-new-section">
      <div class="whats-new-section-header">
       <i class="ph ph-check-circle" style="font-size: 1.25rem; color: #10b981;"></i>
       <h3>Corre√ß√µes</h3>
      </div>
      <ul id="whatsNewFixes" class="whats-new-list"></ul>
     </div>
     
     <!-- Melhorias -->
     <div class="whats-new-section">
      <div class="whats-new-section-header">
       <i class="ph ph-lightning" style="font-size: 1.25rem; color: #f59e0b;"></i>
       <h3>Melhorias</h3>
      </div>
      <ul id="whatsNewImprovements" class="whats-new-list"></ul>
     </div>
     
     <!-- Novas Funcionalidades -->
     <div class="whats-new-section">
      <div class="whats-new-section-header">
       <i class="ph ph-star" style="font-size: 1.25rem; color: #3b82f6;"></i>
       <h3>Novas Funcionalidades</h3>
      </div>
      <ul id="whatsNewFeatures" class="whats-new-list"></ul>
     </div>
    </div>
    
    <!-- Bot√£o fixo -->
    <div class="whats-new-footer">
     <button onclick="closeWhatsNewModal()" class="whats-new-btn">
      <i class="ph ph-check"></i> Entendi
     </button>
    </div>
   </div>
  </div>
  
  <!-- ============================================ -->
  <!-- MODAL: ADICIONAR √Ä Lista de Contas -->
  <!-- ============================================ -->
  <div class="modal" id="todoModal" style="display: none;">
   <div class="modal-content modal-todo">
    <button class="close-modal" onclick="closeExpensesListModal()">√ó</button>
    
    <h3 class="modal-title-simple" id="todoModalTitle">Adicionar √† Lista</h3>
    <p class="modal-subtitle-simple">Despesas √∫nicas para registrar depois</p>
    
    <form id="todoForm" onsubmit="submitExpensesListForm(event)">
     <div class="form-group">
      <label>
       <i class="ph ph-text-aa"></i>
       Nome da Despesa
      </label>
      <input type="text" id="todoTitle" required placeholder="Ex: Pagar pizzaria" maxlength="100">
      <small class="form-hint">Digite uma descri√ß√£o clara da despesa</small>
     </div>
     
     <div class="form-group">
      <label>
       <i class="ph ph-currency-dollar"></i>
       Valor
      </label>
      <div class="input-with-icon">
       <span class="input-icon">R$</span>
       <input type="number" id="todoAmount" required placeholder="0,00" step="0.01" min="0">
      </div>
     </div>
     
     <div class="form-row form-row-2cols">
      <!-- Tipo fixo como "√önica" - removido do formul√°rio -->
      <input type="hidden" id="todoType" value="Despesa √önica">
      
      <div class="form-group">
       <label>
        <i class="ph ph-calendar-blank"></i>
        Data
       </label>
       <input type="date" id="todoDate" required>
      </div>
      
      <div class="form-group">
       <label>
        <i class="ph ph-tag"></i>
        Categoria
       </label>
       <select id="todoCategory" required>
        <option value="">Selecione...</option>
        <option value="Alimenta√ß√£o">Alimenta√ß√£o</option>
        <option value="Transporte">Transporte</option>
        <option value="Moradia">Moradia</option>
        <option value="Sa√∫de">Sa√∫de</option>
        <option value="Educa√ß√£o">Educa√ß√£o</option>
        <option value="Lazer">Lazer</option>
        <option value="Compras">Compras</option>
        <option value="Outros">Outros</option>
       </select>
      </div>
     </div>
     
     <div class="modal-footer">
      <button type="button" onclick="closeExpensesListModal()" class="btn-secondary">
       <i class="ph ph-x"></i> Cancelar
      </button>
      <button type="submit" class="btn-primary">
       <i class="ph ph-plus"></i> Adicionar
      </button>
     </div>
    </form>
   </div>
  </div>
  
  <!-- Modal: Add/Edit Transaction -->
  <div class="modal" id="transactionModal">
   <div class="modal-content modal-transaction">
    <div class="modal-header transaction-modal-header">
     <div class="modal-header-icon" id="transactionModalIcon">
      <i class="ph ph-plus-circle"></i>
     </div>
     <div>
      <h3 id="transactionModalTitle">
       Adicionar Transa√ß√£o
      </h3>
      <p class="modal-subtitle" id="transactionModalSubtitle">Preencha os dados da transa√ß√£o</p>
     </div>
     <button class="close-modal" onclick="closeModal('transactionModal')">
      √ó
     </button>
    </div>
    <div id="transactionError"></div>
    <form id="transactionForm" onsubmit="handleAddTransaction(event)">
     <!-- Indicador de Etapas -->
     <div class="form-steps" id="formSteps">
      <div class="step-item active" data-step="1">
       <div class="step-number">1</div>
       <div class="step-label">Informa√ß√µes</div>
      </div>
      <div class="step-divider"></div>
      <div class="step-item" data-step="2">
       <div class="step-number">2</div>
       <div class="step-label">Detalhes</div>
      </div>
      <div class="step-divider"></div>
      <div class="step-item" data-step="3">
       <div class="step-number">3</div>
       <div class="step-label">Categoria</div>
      </div>
     </div>

     <!-- ETAPA 1: Informa√ß√µes B√°sicas -->
     <div class="form-step" id="step1" style="display: block;">
      <div class="form-group">
       <label>
        <i class="ph ph-text-aa"></i>
        Descri√ß√£o
       </label>
       <input id="transactionDescription" placeholder="Ex: Sal√°rio, Mercado, Aluguel..." required="" type="text"/>
       <small class="form-hint">Digite uma descri√ß√£o clara para identificar a transa√ß√£o</small>
      </div>
      <div class="form-group">
       <label>
        <i class="ph ph-currency-dollar"></i>
        Valor
       </label>
       <div class="input-with-icon">
        <span class="input-icon">R$</span>
        <input id="transactionAmount" placeholder="0,00" required="" step="0.01" type="number"/>
       </div>
      </div>
      
      <!-- Seletor de Tipo de Despesa (apenas para despesas) -->
      <div class="form-group" id="expenseTypeGroup" style="display: none;">
       <label>
        <i class="ph ph-note"></i>
        Tipo de Despesa
       </label>
       <div class="expense-type-selector">
        <div class="expense-type-option" data-type="unica" onclick="selectExpenseTypeAndNext('unica')">
         <div class="expense-type-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
          <i class="ph ph-wallet"></i>
         </div>
         <div class="expense-type-info">
          <div class="expense-type-name">√önica</div>
          <div class="expense-type-desc">Pagamento √∫nico</div>
         </div>
        </div>
        <div class="expense-type-option" data-type="fixa" onclick="selectExpenseTypeAndNext('fixa')">
         <div class="expense-type-icon" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">
          <i class="ph ph-repeat"></i>
         </div>
         <div class="expense-type-info">
          <div class="expense-type-name">Fixa</div>
          <div class="expense-type-desc">Recorrente mensal</div>
         </div>
        </div>
        <div class="expense-type-option" data-type="parcelada" onclick="selectExpenseTypeAndNext('parcelada')">
         <div class="expense-type-icon" style="background: linear-gradient(135deg, #eab308, #ca8a04);">
          <i class="ph ph-credit-card"></i>
         </div>
         <div class="expense-type-info">
          <div class="expense-type-name">Parcelada</div>
          <div class="expense-type-desc">Dividida em parcelas</div>
         </div>
        </div>
       </div>
       <input id="expenseTypeValue" type="hidden" value="unica"/>
      </div>

      <div class="form-navigation" id="step1Nav" style="display: none;">
       <button type="button" class="btn-next" onclick="goToStep(2)">
        Continuar <i class="ph ph-arrow-right"></i>
       </button>
      </div>
     </div>

     <!-- ETAPA 2: Detalhes Espec√≠ficos -->
     <div class="form-step" id="step2" style="display: none;">
      <!-- Campos para Despesa √önica -->
      <div id="singleExpenseFields">
       <div class="form-group">
        <label>
         <i class="ph ph-calendar-blank"></i>
         Data
        </label>
        <input id="transactionDate" type="date" onchange="checkIfFutureDate()"/>
        <small class="form-hint">Quando essa transa√ß√£o ocorreu ou ocorrer√°</small>
       </div>
       
       <!-- ‚úÖ NOVO: Checkbox de agendamento (aparece s√≥ em datas futuras) -->
       <div class="form-group" id="scheduleCheckboxGroup" style="display: none;">
        <div class="checkbox-wrapper">
         <label class="checkbox-label">
          <input type="checkbox" id="scheduleTransaction" checked onchange="toggleScheduleInfo()"/>
          <span class="checkbox-custom"></span>
          <span class="checkbox-text">
           <i class="ph ph-clock"></i>
           Agendar esta transa√ß√£o
          </span>
         </label>
         <small class="form-hint" id="scheduleHint">Marcado: a transa√ß√£o s√≥ ser√° contabilizada na data selecionada</small>
        </div>
       </div>
      </div>

      <!-- Campos para Despesa Fixa -->
      <div id="fixedExpenseFields" style="display: none;">
       <div class="form-group">
        <label>
         <i class="ph ph-calendar-check"></i>
         Data de In√≠cio
        </label>
        <input id="fixedStartDate" type="date"/>
        <small class="form-hint">Quando essa despesa come√ßa a se repetir</small>
       </div>
       <div class="form-group">
        <label>
         <i class="ph ph-calendar-x"></i>
         Data de T√©rmino (Opcional)
        </label>
        <input id="fixedEndDate" type="date"/>
        <small class="form-hint">Deixe em branco para despesas sem data final</small>
       </div>
      </div>

      <!-- Campos para Despesa Parcelada -->
      <div id="installedExpenseFields" style="display: none;">
       <div class="form-group">
        <label>
         <i class="ph ph-hash"></i>
         N√∫mero de Parcelas
        </label>
        <input id="installmentCount" type="number" min="2" max="120" placeholder="Ex: 12"/>
        <small class="form-hint">Em quantas vezes deseja dividir</small>
       </div>
       <div class="form-group">
        <label>
         <i class="ph ph-calendar-blank"></i>
         Per√≠odo das Parcelas
        </label>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
         <div>
          <input id="firstInstallmentDate" type="date" placeholder="Primeira parcela"/>
          <small class="form-hint">Data inicial</small>
         </div>
         <div>
          <input id="lastInstallmentDate" type="date" readonly style="background: #f3f4f6; cursor: not-allowed;" placeholder="√öltima parcela"/>
          <small class="form-hint">Calculado automaticamente</small>
         </div>
        </div>
       </div>
       <div class="installment-preview" id="installmentPreview" style="display: none;">
        <div class="preview-header">
         <i class="ph ph-currency-circle-dollar"></i>
         <span>Resumo do Parcelamento</span>
        </div>
        <div class="preview-content">
         <div class="preview-item">
          <span class="preview-label">Valor Total:</span>
          <span class="preview-value" id="previewTotal">R$ 0,00</span>
         </div>
         <div class="preview-item">
          <span class="preview-label">Valor por Parcela:</span>
          <span class="preview-value" id="previewInstallment">R$ 0,00</span>
         </div>
         <div class="preview-item">
          <span class="preview-label">√öltima Parcela:</span>
          <span class="preview-value" id="previewLastDate">--/--/----</span>
         </div>
        </div>
       </div>
      </div>

      <div class="form-navigation">
       <button type="button" class="btn-back" onclick="goToStep(1)">
        <i class="ph ph-arrow-left"></i> Voltar
       </button>
       <button type="button" class="btn-next" onclick="goToStep(3)">
        Continuar <i class="ph ph-arrow-right"></i>
       </button>
      </div>
     </div>

     <!-- ETAPA 3: Categoria e Confirma√ß√£o -->
     <div class="form-step" id="step3" style="display: none;">
      <div class="form-group">
       <label>
        <i class="ph ph-tag"></i>
        Categoria
       </label>
       <div class="category-select" id="categorySelect"></div>
       <small class="form-hint">Selecione a categoria que melhor representa esta transa√ß√£o</small>
      </div>

      <div class="form-navigation">
       <button type="button" class="btn-back" onclick="goToStep(2)">
        <i class="ph ph-arrow-left"></i> Voltar
       </button>
       <button class="btn-submit-transaction" type="submit">
        <i class="ph ph-check-circle"></i>
        Adicionar Transa√ß√£o
       </button>
      </div>
     </div>
     
     <input id="transactionType" type="hidden"/>
    </form>
   </div>
  </div>

  <!-- Modal: Confirmar Logout -->
  <div class="modal" id="logoutModal">
   <div class="modal-content modal-small">
    <div class="modal-header">
     <h3>Confirmar Sa√≠da</h3>
     <button class="close-modal" onclick="closeModal('logoutModal')">√ó</button>
    </div>
    <div class="logout-modal-content">
     <div class="logout-icon"><i class="ph ph-hand-waving"></i></div>
     <p class="logout-message">Tem certeza que deseja sair?</p>
     <p class="logout-subtitle">Seus dados est√£o salvos e voc√™ pode voltar a qualquer momento.</p>
    </div>
    <div class="logout-modal-actions">
     <button class="btn-cancel" onclick="closeModal('logoutModal')">Cancelar</button>
     <button class="btn-logout-confirm" onclick="confirmLogout()">Sim, Sair</button>
    </div>
   </div>
  </div>

  <!-- Modal: Confirmar Exclus√£o de Transa√ß√£o -->
  <div class="modal" id="deleteTransactionModal">
   <div class="modal-content modal-small">
    <div class="modal-header">
     <h3>Confirmar Exclus√£o</h3>
     <button class="close-modal" onclick="closeModal('deleteTransactionModal')">√ó</button>
    </div>
    <div class="logout-modal-content">
     <div class="logout-icon" style="background: linear-gradient(135deg, #dbeafe, #bfdbfe);">
       <i class="ph ph-trash" style="color: #3b82f6; font-size: 2rem;"></i>
     </div>
     <p class="logout-message" id="deleteTransactionMessage">Deseja realmente excluir esta transa√ß√£o?</p>
     <p class="logout-subtitle" id="deleteTransactionDetail"></p>
    </div>
    <div class="logout-modal-actions">
     <button class="btn-cancel" onclick="closeModal('deleteTransactionModal')">Cancelar</button>
     <button class="btn-logout-confirm" onclick="confirmDeleteTransaction()">Sim, Excluir</button>
    </div>
   </div>
  </div>

<!-- Modal: Add Category -->
<div class="modal" id="newCategoryModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="categoryModalTitle">Nova Categoria</h3>
            <button class="close-modal" onclick="closeModal('newCategoryModal')">√ó</button>
        </div>
        <div id="newCategoryError"></div>
        <form id="newCategoryForm" onsubmit="handleAddNewCategory(event)">
            <div class="form-group">
                <label>Nome da Categoria</label>
                <input type="text" id="newCategoryName" required placeholder="Ex: Academia, Streaming...">
            </div>
            <div class="form-group">
                <label>√çcone</label>
                <div class="icon-grid" id="iconGrid"></div>
            </div>
            <input type="hidden" id="newCategoryType">
            <input type="hidden" id="selectedIcon">
            <button type="submit" class="btn-primary-large" style="width: 100%;">Criar Categoria</button>
        </form>
    </div>
</div>

<!-- Modal: Add Goal Value -->
<div class="modal" id="addGoalValueModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3><i class="ph ph-plus-circle"></i> Adicionar Valor</h3>
            <button class="close-modal" onclick="closeModal('addGoalValueModal')">√ó</button>
        </div>
        <div class="goal-modal-info" id="goalModalInfo">
            <div class="goal-modal-icon"><i class="ph ph-target"></i></div>
            <h4 id="goalModalName"></h4>
            <div class="goal-modal-progress">
                <span id="goalModalCurrent">R$ 0</span>
                <span class="separator">/</span>
                <span id="goalModalTarget">R$ 0</span>
            </div>
        </div>
        <div id="addGoalValueError"></div>
        <form id="addGoalValueForm" onsubmit="handleAddGoalValue(event)">
            <input type="hidden" id="selectedGoalId">
            <div class="form-group">
                <label><i class="ph ph-currency-circle-dollar"></i> Quanto voc√™ quer adicionar?</label>
                <div class="input-with-icon">
                    <span class="input-icon">R$</span>
                    <input type="number" id="goalValueAmount" required step="0.01" min="0.01" placeholder="0,00">
                </div>
                <div id="goalBalanceInfo" class="balance-info" style="margin-top: 0.5rem;"></div>
            </div>
            <button type="submit" class="btn-primary-large" style="width: 100%;">
                <i class="ph ph-plus-circle"></i>
                Adicionar Valor
            </button>
        </form>
    </div>
</div>

<!-- Modal: Confirmation -->
<div class="modal confirmation-modal" id="confirmationModal">
   <div class="modal-content">
    <div class="modal-header">
     <h3 id="confirmationTitle">
      Confirmar A√ß√£o
     </h3>
     <button class="close-modal" onclick="closeModal('confirmationModal')">
      √ó
     </button>
    </div>
    <p id="confirmationMessage" style="text-align: center; color: #6b7280; margin: 2rem 0;">
    </p>
    <div class="confirmation-buttons">
     <button class="btn-cancel" onclick="closeModal('confirmationModal')">
      Cancelar
     </button>
     <button class="btn-danger" id="confirmationButton">
      Confirmar
     </button>
    </div>
   </div>
  </div>

  <!-- Modal: Profile Onboarding (First-time setup) -->
  <div class="modal" id="onboardingModal" style="display: none;">
    <div class="modal-content onboarding-modal-content">
      <div class="onboarding-header">
        <h2>Complete seu Perfil</h2>
        <p>Vamos personalizar sua experi√™ncia financeira em apenas 4 passos!</p>
      </div>

      <!-- Progress Bar -->
      <div class="onboarding-progress">
      </div>

      <!-- Step 1: Basic Info -->
      <div class="onboarding-step active" id="onboardingStep1">
        <p class="step-description">Conte-nos um pouco sobre voc√™</p>
        
        <form id="onboardingForm1">
          <div class="form-group">
            <label>
              <i class="ph ph-user"></i>
              Nome Completo
            </label>
            <input type="text" id="onboardingName" placeholder="Digite seu nome completo">
          </div>

          <div class="form-group">
            <label>
              <i class="ph ph-briefcase"></i>
              Ocupa√ß√£o
            </label>
            <input type="text" id="onboardingOccupation" placeholder="Ex: Desenvolvedor, Professor, Estudante...">
          </div>
        </form>
      </div>

      <!-- Step 2: Financial Info -->
      <div class="onboarding-step" id="onboardingStep2">
        <p class="step-description">Configura√ß√µes financeiras</p>
        
        <form id="onboardingForm2">
          <div class="form-group">
            <label>
              <i class="ph ph-money"></i>
              Renda Mensal *
            </label>
            <input type="number" inputmode="decimal" id="onboardingIncome" placeholder="0.00" min="50" step="0.01" required>
            <small style="color: #64748b; font-size: 0.875rem; margin-top: 0.25rem; display: block;">
              M√≠nimo: R$ 50,00
            </small>
          </div>

          <div class="form-group">
            <label>
              <i class="ph ph-calendar"></i>
              Dia do Recebimento *
            </label>
            <input type="number" inputmode="numeric" id="onboardingPaymentDay" min="1" max="31" placeholder="Ex: 5" required>
          </div>

          <div class="form-group">
            <label>
              <i class="ph ph-target"></i>
              Qual √© seu principal objetivo financeiro?
            </label>
            <div class="category-chips">
              <label class="category-chip">
                <input type="radio" name="goalOption" value="economizar">
                <span>Economizar</span>
              </label>
              <label class="category-chip">
                <input type="radio" name="goalOption" value="investir">
                <span>Investir</span>
              </label>
              <label class="category-chip">
                <input type="radio" name="goalOption" value="dividas">
                <span>Quitar D√≠vidas</span>
              </label>
              <label class="category-chip">
                <input type="radio" name="goalOption" value="controlar">
                <span>Controlar</span>
              </label>
              <label class="category-chip">
                <input type="radio" name="goalOption" value="aposentadoria">
                <span>Aposentadoria</span>
              </label>
              <label class="category-chip">
                <input type="radio" name="goalOption" value="emergencia">
                <span>Emerg√™ncia</span>
              </label>
            </div>
          </div>
        </form>
      </div>

      <!-- Step 3: Preferences -->
      <div class="onboarding-step" id="onboardingStep3">
        <p class="step-description">Prefer√™ncias e alertas</p>
        
        <form id="onboardingForm3">
          <div class="form-group">
            <label>
              <i class="ph ph-chart-line"></i>
              Meta Mensal de Gastos (opcional)
            </label>
            <input type="number" inputmode="decimal" id="onboardingMonthlyLimit" step="0.01" placeholder="0.00" min="25">
            <small style="color: #64748b; font-size: 0.875rem; margin-top: 0.25rem; display: block;">
              Voc√™ receber√° alertas ao se aproximar deste valor (m√≠nimo: R$ 25,00)
            </small>
          </div>

          <div class="form-group">
            <label>
              <i class="ph ph-tag"></i>
              Categorias de Foco (at√© 3)
            </label>
            <div class="category-chips">
              <label class="category-chip">
                <input type="checkbox" name="focusCategory" value="Alimenta√ß√£o">
                <span>Alimenta√ß√£o</span>
              </label>
              <label class="category-chip">
                <input type="checkbox" name="focusCategory" value="Transporte">
                <span>Transporte</span>
              </label>
              <label class="category-chip">
                <input type="checkbox" name="focusCategory" value="Moradia">
                <span>Moradia</span>
              </label>
              <label class="category-chip">
                <input type="checkbox" name="focusCategory" value="Lazer">
                <span>Lazer</span>
              </label>
              <label class="category-chip">
                <input type="checkbox" name="focusCategory" value="Sa√∫de">
                <span>Sa√∫de</span>
              </label>
              <label class="category-chip">
                <input type="checkbox" name="focusCategory" value="Educa√ß√£o">
                <span>Educa√ß√£o</span>
              </label>
            </div>
          </div>
        </form>
      </div>

      <!-- Step 4: Security Question -->
      <div class="onboarding-step" id="onboardingStep4">
        <p class="step-description">Configure uma pergunta de seguran√ßa para recuperar sua senha caso voc√™ esque√ßa</p>
        
        <div class="info-box-minimal" style="margin-bottom: 1.5rem; background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); border: 1px solid #bfdbfe; border-radius: 12px; padding: 1rem; display: flex; align-items: flex-start; gap: 0.75rem;">
          <i class="ph ph-info" style="font-size: 1.25rem; color: #3b82f6; flex-shrink: 0; margin-top: 0.125rem;"></i>
          <div style="color: #1e40af; font-size: 0.875rem; line-height: 1.5;">
            <strong>Dica:</strong> Escolha uma pergunta cuja resposta voc√™ nunca esquecer√°. Voc√™ precisar√° dela para recuperar sua senha.
          </div>
        </div>
        
        <form id="onboardingForm4">
          <div class="form-group">
            <label>
              <i class="ph ph-shield-check"></i>
              Pergunta de Seguran√ßa
            </label>
            <select id="onboardingQuestion1" required>
              <option value="">Selecione uma pergunta</option>
              <option value="Qual o nome do seu primeiro animal de estima√ß√£o?">Qual o nome do seu primeiro animal de estima√ß√£o?</option>
              <option value="Em qual cidade voc√™ nasceu?">Em qual cidade voc√™ nasceu?</option>
              <option value="Qual o nome da sua m√£e?">Qual o nome da sua m√£e?</option>
              <option value="Qual era o nome da sua primeira escola?">Qual era o nome da sua primeira escola?</option>
              <option value="Qual √© o seu filme favorito?">Qual √© o seu filme favorito?</option>
              <option value="Qual √© o nome da sua rua favorita?">Qual √© o nome da sua rua favorita?</option>
              <option value="Qual √© o seu livro favorito?">Qual √© o seu livro favorito?</option>
              <option value="Qual √© o nome do seu melhor amigo de inf√¢ncia?">Qual √© o nome do seu melhor amigo de inf√¢ncia?</option>
              <option value="Em qual cidade seus pais se conheceram?">Em qual cidade seus pais se conheceram?</option>
              <option value="Qual √© o seu apelido de inf√¢ncia?">Qual √© o seu apelido de inf√¢ncia?</option>
            </select>
          </div>

          <div class="form-group">
            <label>
              <i class="ph ph-key"></i>
              Sua Resposta
            </label>
            <input type="text" id="onboardingAnswer1" required placeholder="Digite sua resposta" autocomplete="off">
            <small style="color: #64748b; font-size: 0.813rem; margin-top: 0.375rem; display: block;">
              <i class="ph ph-lock-simple"></i> Sua resposta ser√° criptografada e n√£o poder√° ser vista por ningu√©m
            </small>
          </div>

        </form>
      </div>

      <!-- Navigation Buttons -->
      <div class="onboarding-actions">
        <div class="page-indicator" id="pageIndicator">
          1/4
        </div>
        <div class="onboarding-nav-buttons">
          <button class="btn-secondary" onclick="previousOnboardingStep()" id="prevButton" style="display: none;">
            ‚Üê Anterior
          </button>
          <button class="btn-primary-large" onclick="nextOnboardingStep()" id="nextButton">
            Pr√≥ximo ‚Üí
          </button>
          <button class="btn-primary-large btn-onboarding-complete" onclick="completeOnboarding()" id="completeButton" style="display: none;">
            Concluir
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: User Profile -->
  <div class="modal" id="profileModal">
    <div class="modal-content profile-modal-content">
      <button class="close-modal" onclick="closeModal('profileModal')">√ó</button>
      
      <div class="profile-section">
        <!-- Header Minimalista -->
        <div class="profile-header-minimal">
          <div class="profile-avatar-minimal" id="profileAvatarLarge"></div>
          <div class="profile-info-minimal">
            <h2 id="profileName"></h2>
            <p id="profileEmail"></p>
          </div>
        </div>

        <!-- Tabs Minimalistas -->
        <div class="profile-tabs-minimal">
          <button class="profile-tab-minimal active" onclick="switchProfileTab('info')">
            <i class="ph ph-user"></i>
            <span>Perfil</span>
          </button>
          <button class="profile-tab-minimal" onclick="switchProfileTab('financial')">
            <i class="ph ph-wallet"></i>
            <span>Financeiro</span>
          </button>
          <button class="profile-tab-minimal" onclick="switchProfileTab('security')">
            <i class="ph ph-lock"></i>
            <span>Seguran√ßa</span>
          </button>
          <button class="profile-tab-minimal" onclick="switchProfileTab('questions')">
            <i class="ph ph-question"></i>
            <span>Perguntas</span>
          </button>
        </div>

        <!-- Tab: Informa√ß√µes Pessoais -->
        <div class="profile-tab-content active" id="tabInfo">
          <form id="profileInfoForm" onsubmit="updateProfileInfo(event)">
            <div class="form-group-minimal">
              <label><i class="ph ph-user"></i> Nome</label>
              <input type="text" id="profileNameInput" required placeholder="Seu nome completo">
            </div>

            <div class="form-group-minimal">
              <label><i class="ph ph-envelope"></i> E-mail</label>
              <input type="email" id="profileEmailInput" required readonly>
              <small>O e-mail n√£o pode ser alterado</small>
            </div>

            <div class="form-group-minimal">
              <label><i class="ph ph-briefcase"></i> Ocupa√ß√£o</label>
              <input type="text" id="profileOccupation" placeholder="Ex: Desenvolvedor, Designer...">
            </div>

            <!-- Bot√µes de A√ß√£o -->
            <div class="profile-actions-buttons">
              <button type="submit" class="btn-save-profile">
                <i class="ph ph-check"></i>
                Salvar Perfil
              </button>
              <button type="button" class="btn-logout-profile" onclick="logout()">
                <i class="ph ph-sign-out"></i>
                <span class="btn-text">Sair</span>
              </button>
            </div>
          </form>
        </div>

        <!-- Tab: Dados Financeiros -->
        <div class="profile-tab-content" id="tabFinancial">
          <form id="profileFinancialForm" onsubmit="updateFinancialInfo(event)">
            
            <div class="info-box-alert" style="margin-bottom: 1.5rem;">
              <i class="ph ph-info"></i>
              <div>
                <strong>Importante:</strong> Altera√ß√µes de sal√°rio e meta mensal s√≥ valer√£o a partir do pr√≥ximo m√™s. 
                O sal√°rio do m√™s atual j√° foi registrado automaticamente.
              </div>
            </div>

            <div class="form-group-minimal">
              <label><i class="ph ph-currency-dollar"></i> Renda Mensal</label>
              <input type="number" id="profileIncome" step="0.01" min="0" placeholder="R$ 0,00">
              <small>Seu sal√°rio ser√° adicionado automaticamente todo m√™s no dia de recebimento</small>
            </div>

            <div class="form-group-minimal">
              <label><i class="ph ph-calendar-check"></i> Dia de Recebimento</label>
              <input type="number" id="profilePaymentDay" min="1" max="31" placeholder="1-31">
              <small>Dia do m√™s em que voc√™ recebe seu sal√°rio</small>
            </div>

            <div class="form-group-minimal">
              <label><i class="ph ph-target"></i> Meta de Gastos Mensal</label>
              <input type="number" id="profileMonthlyGoal" step="0.01" min="0" placeholder="R$ 0,00">
              <small>Limite m√°ximo de gastos que voc√™ deseja ter por m√™s</small>
            </div>

            <div class="profile-stats-minimal">
              <div class="stat-minimal">
                <i class="ph ph-chart-line-up"></i>
                <div>
                  <span class="stat-value" id="savingsRate">0%</span>
                  <span class="stat-label">Economia</span>
                </div>
              </div>
              <div class="stat-minimal">
                <i class="ph ph-wallet"></i>
                <div>
                  <span class="stat-value" id="monthlyExpenses">R$ 0</span>
                  <span class="stat-label">Gastos/M√™s</span>
                </div>
              </div>
            </div>

            <button type="submit" class="btn-save-profile">
              <i class="ph ph-check"></i>
              Salvar
            </button>
          </form>
        </div>

        <!-- Tab: Seguran√ßa -->
        <div class="profile-tab-content" id="tabSecurity">
          <form id="profileSecurityForm" onsubmit="updatePassword(event)">
            
            <div class="form-group-minimal">
              <label><i class="ph ph-lock"></i> Senha Atual</label>
              <div class="password-input-wrapper">
                <input type="password" id="currentPassword" autocomplete="current-password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                <button type="button" class="toggle-password" onclick="toggleProfilePassword('currentPassword', 'eyeCurrentPassword')" aria-label="Mostrar senha">
                  <svg id="eyeCurrentPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                </button>
              </div>
            </div>

            <div class="form-group-minimal">
              <label><i class="ph ph-lock-key"></i> Nova Senha</label>
              <div class="password-input-wrapper">
                <input type="password" id="profileNewPassword" autocomplete="new-password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6" oninput="checkPasswordStrength()">
                <button type="button" class="toggle-password" onclick="toggleProfilePassword('profileNewPassword', 'eyeProfileNewPassword')" aria-label="Mostrar senha">
                  <svg id="eyeProfileNewPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                </button>
              </div>
              <div class="password-strength-indicator" id="passwordStrengthIndicator" style="display: none;">
                <div class="strength-bar-container">
                  <div class="strength-bar-fill" id="strengthBarFill"></div>
                </div>
                <span class="strength-text" id="strengthTextLabel"></span>
              </div>
              <small>M√≠nimo 6 caracteres</small>
            </div>

            <div class="form-group-minimal">
              <label><i class="ph ph-lock-key"></i> Confirmar Senha</label>
              <div class="password-input-wrapper">
                <input type="password" id="confirmPasswordProfile" autocomplete="new-password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                <button type="button" class="toggle-password" onclick="toggleProfilePassword('confirmPasswordProfile', 'eyeConfirmPasswordProfile')" aria-label="Mostrar senha">
                  <svg id="eyeConfirmPasswordProfile" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                </button>
              </div>
            </div>

            <button type="submit" class="btn-save-profile">
              <i class="ph ph-check"></i>
              Alterar Senha
            </button>
          </form>
        </div>

        <!-- Tab: Perguntas de Seguran√ßa -->
        <div class="profile-tab-content" id="tabQuestions">
          <div class="info-box-alert" style="margin-bottom: 1.5rem;">
            <i class="ph ph-shield-check"></i>
            <div>
              <strong>Perguntas de Seguran√ßa</strong><br>
              Configure 3 perguntas para recuperar sua senha caso voc√™ a esque√ßa. As respostas s√£o criptografadas e n√£o podem ser vistas por ningu√©m.
            </div>
          </div>

          <form id="profileQuestionsForm" onsubmit="updateSecurityQuestions(event)">
            
            <!-- Pergunta 1 -->
            <div class="form-group">
              <label>
                <i class="ph ph-shield-check"></i>
                Pergunta de Seguran√ßa 1
              </label>
              <select id="securityQuestion1Select" required>
                <option value="">Selecione uma pergunta...</option>
                <option value="Qual o nome do seu primeiro animal de estima√ß√£o?">Qual o nome do seu primeiro animal de estima√ß√£o?</option>
                <option value="Em qual cidade voc√™ nasceu?">Em qual cidade voc√™ nasceu?</option>
                <option value="Qual o nome da sua primeira escola?">Qual o nome da sua primeira escola?</option>
                <option value="Qual o nome de solteira da sua m√£e?">Qual o nome de solteira da sua m√£e?</option>
                <option value="Qual era o nome do seu primeiro professor?">Qual era o nome do seu primeiro professor?</option>
                <option value="Qual o seu filme favorito?">Qual o seu filme favorito?</option>
                <option value="Qual o nome da rua onde voc√™ cresceu?">Qual o nome da rua onde voc√™ cresceu?</option>
                <option value="Qual era a marca do seu primeiro carro?">Qual era a marca do seu primeiro carro?</option>
                <option value="Qual o seu livro favorito?">Qual o seu livro favorito?</option>
                <option value="Qual o nome do seu melhor amigo de inf√¢ncia?">Qual o nome do seu melhor amigo de inf√¢ncia?</option>
              </select>
            </div>

            <div class="form-group">
              <label>
                <i class="ph ph-key"></i>
                Resposta 1
              </label>
              <input type="text" id="securityAnswer1Input" required placeholder="Digite sua resposta" autocomplete="off">
              <small style="color: #64748b; font-size: 0.813rem; margin-top: 0.375rem; display: block;">
                <i class="ph ph-lock-simple"></i> A resposta ser√° criptografada
              </small>
            </div>

            <!-- Pergunta 2 -->
            <div class="form-group">
              <label>
                <i class="ph ph-shield-check"></i>
                Pergunta de Seguran√ßa 2
              </label>
              <select id="securityQuestion2Select" required>
                <option value="">Selecione uma pergunta...</option>
                <option value="Qual o nome do seu primeiro animal de estima√ß√£o?">Qual o nome do seu primeiro animal de estima√ß√£o?</option>
                <option value="Em qual cidade voc√™ nasceu?">Em qual cidade voc√™ nasceu?</option>
                <option value="Qual o nome da sua primeira escola?">Qual o nome da sua primeira escola?</option>
                <option value="Qual o nome de solteira da sua m√£e?">Qual o nome de solteira da sua m√£e?</option>
                <option value="Qual era o nome do seu primeiro professor?">Qual era o nome do seu primeiro professor?</option>
                <option value="Qual o seu filme favorito?">Qual o seu filme favorito?</option>
                <option value="Qual o nome da rua onde voc√™ cresceu?">Qual o nome da rua onde voc√™ cresceu?</option>
                <option value="Qual era a marca do seu primeiro carro?">Qual era a marca do seu primeiro carro?</option>
                <option value="Qual o seu livro favorito?">Qual o seu livro favorito?</option>
                <option value="Qual o nome do seu melhor amigo de inf√¢ncia?">Qual o nome do seu melhor amigo de inf√¢ncia?</option>
              </select>
            </div>

            <div class="form-group">
              <label>
                <i class="ph ph-key"></i>
                Resposta 2
              </label>
              <input type="text" id="securityAnswer2Input" required placeholder="Digite sua resposta" autocomplete="off">
              <small style="color: #64748b; font-size: 0.813rem; margin-top: 0.375rem; display: block;">
                <i class="ph ph-lock-simple"></i> A resposta ser√° criptografada
              </small>
            </div>

            <!-- Pergunta 3 -->
            <div class="form-group">
              <label>
                <i class="ph ph-shield-check"></i>
                Pergunta de Seguran√ßa 3
              </label>
              <select id="securityQuestion3Select" required>
                <option value="">Selecione uma pergunta...</option>
                <option value="Qual o nome do seu primeiro animal de estima√ß√£o?">Qual o nome do seu primeiro animal de estima√ß√£o?</option>
                <option value="Em qual cidade voc√™ nasceu?">Em qual cidade voc√™ nasceu?</option>
                <option value="Qual o nome da sua primeira escola?">Qual o nome da sua primeira escola?</option>
                <option value="Qual o nome de solteira da sua m√£e?">Qual o nome de solteira da sua m√£e?</option>
                <option value="Qual era o nome do seu primeiro professor?">Qual era o nome do seu primeiro professor?</option>
                <option value="Qual o seu filme favorito?">Qual o seu filme favorito?</option>
                <option value="Qual o nome da rua onde voc√™ cresceu?">Qual o nome da rua onde voc√™ cresceu?</option>
                <option value="Qual era a marca do seu primeiro carro?">Qual era a marca do seu primeiro carro?</option>
                <option value="Qual o seu livro favorito?">Qual o seu livro favorito?</option>
                <option value="Qual o nome do seu melhor amigo de inf√¢ncia?">Qual o nome do seu melhor amigo de inf√¢ncia?</option>
              </select>
            </div>

            <div class="form-group">
              <label>
                <i class="ph ph-key"></i>
                Resposta 3
              </label>
              <input type="text" id="securityAnswer3Input" required placeholder="Digite sua resposta" autocomplete="off">
              <small style="color: #64748b; font-size: 0.813rem; margin-top: 0.375rem; display: block;">
                <i class="ph ph-lock-simple"></i> A resposta ser√° criptografada
              </small>
            </div>

            <!-- Campo de confirma√ß√£o de senha -->
            <div class="form-group" style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e5e7eb;">
              <label>
                <i class="ph ph-lock"></i>
                Senha Atual (para confirmar)
              </label>
              <div class="password-input-wrapper">
                <input type="password" id="confirmPasswordQuestions" autocomplete="current-password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                <button type="button" class="toggle-password" onclick="toggleProfilePassword('confirmPasswordQuestions', 'eyeConfirmPasswordQuestions')" aria-label="Mostrar senha">
                  <svg id="eyeConfirmPasswordQuestions" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                    <circle cx="12" cy="12" r="3"></circle>
                  </svg>
                </button>
              </div>
              <small>Digite sua senha para confirmar as altera√ß√µes</small>
            </div>

            <button type="submit" class="btn-save-profile">
              <i class="ph ph-check"></i>
              Salvar Perguntas
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Welcome -->
  <div class="welcome-screen" id="welcomeModal" style="display:none;">
    <div class="gradient-background">
      <div class="gradient-sphere sphere-1"></div>
      <div class="gradient-sphere sphere-2"></div>
      <div class="gradient-sphere sphere-3"></div>
      <div class="glow"></div>
      <div class="grid-overlay"></div>
      <div class="noise-overlay"></div>
      <div class="particles-container" id="welcome-particles-container"></div>
    </div>
    <div class="welcome-box">
      <div class="welcome-header">
        <div class="welcome-logo">
          <div class="logo-circle">
            <i class="ph ph-piggy-bank"></i>
          </div>
        </div>
        <h2>Bem-vindo ao <span class="brand-highlight">PoupA√≠</span></h2>
        <p class="welcome-subtitle">Ol√°, <strong id="welcomeUserName"></strong>!</p>
        <p class="welcome-tagline">Seu assistente financeiro pessoal est√° pronto para ajudar!</p>
      </div>
      
      <!-- Vers√£o Web: Features Grid -->
      <div class="welcome-features">
        <div class="welcome-feature">
          <div class="feature-icon-wrapper">
            <i class="ph ph-chart-line-up"></i>
          </div>
          <div class="feature-content">
            <h3>Controle Total</h3>
            <p>Visualize receitas e despesas em tempo real</p>
          </div>
        </div>
        
        <div class="welcome-feature">
          <div class="feature-icon-wrapper">
            <i class="ph ph-target"></i>
          </div>
          <div class="feature-content">
            <h3>Metas Inteligentes</h3>
            <p>Alcance seus objetivos com planejamento autom√°tico</p>
          </div>
        </div>
        
        <div class="welcome-feature">
          <div class="feature-icon-wrapper">
            <i class="ph ph-lightbulb"></i>
          </div>
          <div class="feature-content">
            <h3>Insights Personalizados</h3>
            <p>Dicas baseadas no seu comportamento financeiro</p>
          </div>
        </div>
        
        <div class="welcome-feature">
          <div class="feature-icon-wrapper">
            <i class="ph ph-trend-up"></i>
          </div>
          <div class="feature-content">
            <h3>Simuladores Avan√ßados</h3>
            <p>Projete seu futuro financeiro com precis√£o</p>
          </div>
        </div>
      </div>
      
      <!-- Vers√£o Web: Stats -->
      <div class="welcome-stats">
        <div class="stat-item">
          <i class="ph ph-graduation-cap"></i>
          <div>
            <strong>Projeto</strong>
            <span>Acad√™mico</span>
          </div>
        </div>
        <div class="stat-divider"></div>
        <div class="stat-item">
          <i class="ph ph-lightbulb"></i>
          <div>
            <strong>Educa√ß√£o</strong>
            <span>Financeira</span>
          </div>
        </div>
        <div class="stat-divider"></div>
        <div class="stat-item">
          <i class="ph ph-rocket-launch"></i>
          <div>
            <strong>100%</strong>
            <span>Gratuito</span>
          </div>
        </div>
      </div>
      
      <!-- Vers√£o Mobile: Mensagem Simplificada -->
      <div class="welcome-message">
        <p>Seu assistente financeiro pessoal est√° pronto para ajudar voc√™ a alcan√ßar seus objetivos!</p>
        <p>Com o PoupA√≠, voc√™ ter√° controle total das suas finan√ßas, poder√° definir metas inteligentes e receber insights personalizados sobre seu comportamento financeiro.</p>
        <p>Vamos come√ßar essa jornada juntos!</p>
      </div>
      
      <div class="welcome-cta">
        <button class="btn-primary-large" id="welcomeStartButton" onclick="startWelcomeJourney(this)">
          <span id="welcomeButtonText">Come√ßar</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Modal de Detalhes da Transa√ß√£o -->
  <div class="modal" id="transactionDetailModal">
    <div class="modal-content modal-small">
      <div class="transaction-detail-header">
        <div class="transaction-detail-icon" id="transactionDetailIcon">
          <i class="ph ph-swap"></i>
        </div>
        <div class="transaction-detail-title">
          <h3 id="transactionDetailDescription">Detalhes da Transa√ß√£o</h3>
          <span class="transaction-detail-category" id="transactionDetailCategory"></span>
        </div>
        <button class="close-modal" onclick="closeTransactionDetail()">
          <i class="ph ph-x"></i>
        </button>
      </div>
      <div class="transaction-detail-body">
        <div class="transaction-detail-row">
          <span class="detail-label"><i class="ph ph-currency-circle-dollar"></i> Valor</span>
          <span class="detail-value" id="transactionDetailValue">R$ 0,00</span>
        </div>
        <div class="transaction-detail-row">
          <span class="detail-label"><i class="ph ph-calendar"></i> Data</span>
          <span class="detail-value" id="transactionDetailDate">--/--/----</span>
        </div>
        <div class="transaction-detail-row">
          <span class="detail-label"><i class="ph ph-tag"></i> Categoria</span>
          <span class="detail-value" id="transactionDetailCategoryText">--</span>
        </div>
        <div class="transaction-detail-row">
          <span class="detail-label"><i class="ph ph-swap"></i> Tipo</span>
          <span class="detail-value" id="transactionDetailType">--</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Explica√ß√£o: Tend√™ncia -->
  <div class="modal info-tooltip-modal" id="trendTooltipModal">
    <div class="modal-content modal-small">
      <div class="tooltip-modal-header">
        <i class="ph ph-chart-line"></i>
        <h3>Tend√™ncia (7 dias)</h3>
      </div>
      <div class="tooltip-modal-body">
        <p><strong>Como funciona:</strong></p>
        <p>Calcula a m√©dia de gastos dos <strong>√∫ltimos 7 dias</strong> e compara com a semana anterior.</p>
        <ul>
          <li><strong style="color: #059669;">‚Üë Verde:</strong> Voc√™ est√° gastando menos que antes (economia!)</li>
          <li><strong style="color: #dc2626;">‚Üì Vermelho:</strong> Voc√™ est√° gastando mais que antes (aten√ß√£o!)</li>
          <li><strong style="color: #6b7280;">‚Üí Neutro:</strong> Gastos est√°veis</li>
        </ul>
        <p class="tooltip-tip"><i class="ph ph-lightbulb"></i> <strong>Dica:</strong> Use isso para identificar se seus h√°bitos est√£o melhorando ou precisam de ajuste.</p>
      </div>
    </div>
  </div>

  <!-- Modal de Explica√ß√£o: Economia Potencial -->
  <div class="modal info-tooltip-modal" id="savingsTooltipModal">
    <div class="modal-content modal-small">
      <div class="tooltip-modal-header">
        <i class="ph ph-piggy-bank"></i>
        <h3>Economia Potencial</h3>
      </div>
      <div class="tooltip-modal-body">
        <p><strong>Como funciona:</strong></p>
        <p>Identifica a <strong>maior despesa n√£o essencial</strong> do m√™s atual e mostra quanto voc√™ economizaria eliminando-a.</p>
        <p><strong>Categorias analisadas (n√£o essenciais):</strong></p>
        <ul>
          <li>Restaurantes e delivery</li>
          <li>Lazer e entretenimento</li>
          <li>Streaming e assinaturas</li>
          <li>Supermercado (compras extras)</li>
        </ul>
        <p><strong>N√ÉO sugere cortar:</strong> Moradia, Aluguel, Contas, Sa√∫de, Educa√ß√£o, Transporte essencial</p>
        <p class="tooltip-tip"><i class="ph ph-lightbulb"></i> <strong>Dica:</strong> N√£o √© para voc√™ necessariamente cortar esse gasto, mas para ter consci√™ncia do impacto dele no or√ßamento!</p>
      </div>
    </div>
  </div>

  <!-- Modal de Explica√ß√£o: Gasto M√©dio Di√°rio -->
  <div class="modal info-tooltip-modal" id="avgDailyTooltipModal">
    <div class="modal-content modal-small">
      <div class="tooltip-modal-header">
        <i class="ph ph-calendar-check"></i>
        <h3>Gasto M√©dio Di√°rio</h3>
      </div>
      <div class="tooltip-modal-body">
        <p><strong>Como funciona:</strong></p>
        <p>Calcula a <strong>m√©dia de gastos por dia</strong> nos √∫ltimos 30 dias.</p>
        <p><strong>F√≥rmula:</strong> Total de Despesas √∑ Dias com Transa√ß√µes</p>
        <p class="tooltip-tip"><i class="ph ph-lightbulb"></i> <strong>Dica:</strong> Use esse valor como refer√™ncia para planejar seu or√ßamento di√°rio e evitar surpresas no fim do m√™s!</p>
      </div>
    </div>
  </div>

  <!-- Modal de Explica√ß√£o: Pr√≥ximo Feriado -->
  <div class="modal info-tooltip-modal" id="holidayTooltipModal">
    <div class="modal-content modal-small">
      <div class="tooltip-modal-header">
        <i class="ph ph-confetti"></i>
        <h3>Pr√≥ximo Feriado</h3>
      </div>
      <div class="tooltip-modal-body">
        <p><strong>Como funciona:</strong></p>
        <p>Mostra o <strong>pr√≥ximo feriado nacional</strong> baseado no calend√°rio brasileiro oficial.</p>
        <p><strong>Por que √© importante:</strong></p>
        <ul>
          <li>Planeje gastos extras (viagens, lazer)</li>
          <li>Antecipe compras que podem ficar mais caras</li>
          <li>Organize seu or√ßamento considerando dias sem trabalho</li>
        </ul>
        <p class="tooltip-tip"><i class="ph ph-lightbulb"></i> <strong>Dica:</strong> Feriados prolongados geralmente aumentam gastos. Reserve uma parte do or√ßamento com anteced√™ncia!</p>
      </div>
    </div>
  </div>

  <!-- Modal de Explica√ß√£o: Proje√ß√£o Fim do M√™s -->
  <div class="modal info-tooltip-modal" id="projectionTooltipModal">
    <div class="modal-content modal-small">
      <div class="tooltip-modal-header">
        <i class="ph ph-calendar-dots"></i>
        <h3>Proje√ß√£o at√© Fim do M√™s</h3>
      </div>
      <div class="tooltip-modal-body">
        <p><strong>Como funciona:</strong></p>
        <p>Estima quanto voc√™ vai gastar <strong>at√© o √∫ltimo dia do m√™s atual</strong> com base no seu ritmo de gastos.</p>
        <p><strong>C√°lculo:</strong></p>
        <ol>
          <li>Calcula m√©dia de gastos di√°rios do m√™s</li>
          <li>Multiplica pela quantidade de dias restantes</li>
          <li>Soma com o que j√° foi gasto</li>
        </ol>
        <p class="tooltip-tip"><i class="ph ph-lightbulb"></i> <strong>Dica:</strong> Se a proje√ß√£o estiver muito alta, √© hora de reduzir gastos nos pr√≥ximos dias!</p>
      </div>
    </div>
  </div>

  <!-- Modal de Explica√ß√£o: Previs√£o Pr√≥ximo M√™s -->
  <div class="modal info-tooltip-modal" id="forecastTooltipModal">
    <div class="modal-content modal-small">
      <div class="tooltip-modal-header">
        <i class="ph ph-crystal-ball"></i>
        <h3>Previs√£o para Pr√≥ximo M√™s</h3>
      </div>
      <div class="tooltip-modal-body">
        <p><strong>Como funciona:</strong></p>
        <p>Prev√™ quanto voc√™ deve gastar no <strong>pr√≥ximo m√™s</strong> analisando seu hist√≥rico recente.</p>
        <p><strong>M√©todo de c√°lculo:</strong></p>
        <ul>
          <li>Analisa os gastos dos <strong>√∫ltimos 3 meses</strong></li>
          <li>Calcula a <strong>m√©dia mensal</strong></li>
          <li>Ajusta considerando despesas fixas e parceladas confirmadas</li>
        </ul>
        <p class="tooltip-tip"><i class="ph ph-lightbulb"></i> <strong>Dica:</strong> Use essa previs√£o para planejar seu or√ßamento e evitar estourar o limite!</p>
      </div>
    </div>
  </div>

  <!-- Modal de Explica√ß√£o: Maior Gasto do M√™s -->
  <div class="modal info-tooltip-modal" id="biggestExpenseTooltipModal">
    <div class="modal-content modal-small">
      <div class="tooltip-modal-header">
        <i class="ph ph-trend-up"></i>
        <h3>Maior Gasto do M√™s</h3>
      </div>
      <div class="tooltip-modal-body">
        <p><strong>Como funciona:</strong></p>
        <p>Identifica a <strong>maior despesa individual</strong> registrada no m√™s atual.</p>
        <p><strong>Informa√ß√µes exibidas:</strong></p>
        <ul>
          <li>Valor da maior despesa</li>
          <li>Descri√ß√£o/nome da transa√ß√£o</li>
          <li>Categoria do gasto</li>
        </ul>
        <p class="tooltip-tip"><i class="ph ph-lightbulb"></i> <strong>Dica:</strong> Acompanhe seus maiores gastos para identificar onde voc√™ pode otimizar seu or√ßamento!</p>
      </div>
    </div>
  </div>

  <!-- Modal de Explica√ß√£o: Taxa de Poupan√ßa -->
  <div class="modal info-tooltip-modal" id="savingsRateTooltipModal">
    <div class="modal-content modal-small">
      <div class="tooltip-modal-header">
        <i class="ph ph-percent"></i>
        <h3>Taxa de Poupan√ßa</h3>
      </div>
      <div class="tooltip-modal-body">
        <p><strong>Como funciona:</strong></p>
        <p>Calcula <strong>qual porcentagem da sua receita</strong> voc√™ consegue economizar por m√™s.</p>
        <p><strong>F√≥rmula:</strong></p>
        <p style="background: #f3f4f6; padding: 10px; border-radius: 8px; font-family: monospace;">
          Taxa = ((Receitas - Despesas) √∑ Receitas) √ó 100
        </p>
        <p><strong>Interpreta√ß√£o:</strong></p>
        <ul>
          <li><strong style="color: #059669;">‚â• 20%:</strong> Excelente! Voc√™ poupa bem</li>
          <li><strong style="color: #f59e0b;">10-20%:</strong> Bom, mas pode melhorar</li>
          <li><strong style="color: #dc2626;">< 10%:</strong> Aten√ß√£o! Tente economizar mais</li>
        </ul>
        <p class="tooltip-tip"><i class="ph ph-lightbulb"></i> <strong>Dica:</strong> Especialistas recomendam poupar pelo menos 20% da renda mensal!</p>
      </div>
    </div>
  </div>

  <!-- Modal de Explica√ß√£o: Dias at√© Sal√°rio -->
  <div class="modal info-tooltip-modal" id="daysToSalaryTooltipModal">
    <div class="modal-content modal-small">
      <div class="tooltip-modal-header">
        <i class="ph ph-clock-countdown"></i>
        <h3>Dias at√© o Sal√°rio</h3>
      </div>
      <div class="tooltip-modal-body">
        <p><strong>Como funciona:</strong></p>
        <p>Conta quantos <strong>dias faltam</strong> at√© o pr√≥ximo recebimento de sal√°rio baseado no hist√≥rico de receitas.</p>
        <p><strong>C√°lculo autom√°tico:</strong></p>
        <ul>
          <li>Analisa suas receitas salariais recentes</li>
          <li>Identifica o padr√£o de recebimento (dia do m√™s)</li>
          <li>Calcula dias restantes at√© a pr√≥xima data</li>
        </ul>
        <p><strong>Tamb√©m exibe:</strong></p>
        <ul>
          <li>Gasto m√©dio di√°rio no per√≠odo</li>
          <li>Quanto voc√™ ainda pode gastar por dia</li>
        </ul>
        <p class="tooltip-tip"><i class="ph ph-lightbulb"></i> <strong>Dica:</strong> Use para gerenciar melhor seus gastos at√© o pr√≥ximo sal√°rio!</p>
      </div>
    </div>
  </div>

  <!-- Pop-up: Novo Resumo Dispon√≠vel -->
  <div id="monthlyReviewNotification" class="monthly-notification">
    <div class="notification-content">
      <div class="notification-icon">
        <i class="ph ph-calendar-check"></i>
      </div>
      <div class="notification-text">
        <h3>Resumo Mensal Dispon√≠vel!</h3>
        <p>Seu resumo de <span id="notifMonthName">Outubro 2025</span> est√° pronto</p>
      </div>
      <div class="notification-actions">
        <button class="notif-btn-secondary" onclick="closeMonthlyNotification()">
          <i class="ph ph-x"></i>
          Fechar
        </button>
        <button class="notif-btn-primary" onclick="openMonthlyReviewFromNotif()">
          <i class="ph ph-eye"></i>
          Ver Resumo
        </button>
      </div>
    </div>
  </div>

  <!-- Notifica√ß√£o: Exporta√ß√£o PDF -->
  <div id="pdfExportNotification" class="toast-notification">
    <div class="toast-content">
      <div class="toast-icon toast-success">
        <i class="ph ph-check-circle"></i>
      </div>
      <div class="toast-text">
        <h4>PDF Exportado com Sucesso!</h4>
        <p>Seu resumo mensal foi salvo</p>
      </div>
      <button class="toast-close" onclick="closeToast('pdfExportNotification')">
        <i class="ph ph-x"></i>
      </button>
    </div>
    <div class="toast-progress"></div>
  </div>

  <!-- Notifica√ß√£o: Geral (Azul) -->
  <!-- Popup de Notifica√ß√£o Centralizado -->
  <div id="popupNotification" class="popup-notification" style="display: none;">
    <div class="popup-overlay" onclick="closePopup()"></div>
    <div class="popup-content">
      <div class="popup-icon" id="popupIcon">
        <i class="ph ph-info"></i>
      </div>
      <h3 id="popupTitle">Notifica√ß√£o</h3>
      <p id="popupMessage">Mensagem</p>
      <div class="popup-buttons" id="popupButtons">
        <button class="popup-btn popup-btn-primary" onclick="closePopup()">OK</button>
      </div>
    </div>
  </div>

  <!-- Modal: Resumo Mensal Autom√°tico -->
  <div id="monthlyReviewModal" class="modal monthly-review-modal">
    <div class="modal-content monthly-review-content">
      <div class="monthly-review-header">
        <div class="review-header-top">
          <div class="review-icon-wrapper">
            <i class="ph ph-calendar-check"></i>
          </div>
          <div class="review-header-text">
            <h2>Resumo do M√™s</h2>
            <p id="reviewMonthName">Outubro 2025</p>
          </div>
        </div>
        <button class="review-close-btn" onclick="closeMonthlyReview()">
          <i class="ph ph-x"></i>
        </button>
      </div>

      <div class="monthly-review-body">
        <!-- Resumo Financeiro -->
        <div class="review-section">
          <div class="review-section-header">
            <i class="ph ph-wallet"></i>
            <h3>Resumo Financeiro</h3>
          </div>
          <div class="review-cards-row">
            <div class="review-card card-income">
              <div class="review-card-icon">
                <i class="ph ph-arrow-up"></i>
              </div>
              <div class="review-card-content">
                <span class="review-card-label">Receitas</span>
                <span class="review-card-value" id="reviewIncome">R$ 0,00</span>
              </div>
            </div>
            <div class="review-card card-expense">
              <div class="review-card-icon">
                <i class="ph ph-arrow-down"></i>
              </div>
              <div class="review-card-content">
                <span class="review-card-label">Despesas</span>
                <span class="review-card-value" id="reviewExpense">R$ 0,00</span>
              </div>
            </div>
            <div class="review-card card-balance">
              <div class="review-card-icon">
                <i class="ph ph-piggy-bank"></i>
              </div>
              <div class="review-card-content">
                <span class="review-card-label">Economia</span>
                <span class="review-card-value" id="reviewSavings">R$ 0,00</span>
              </div>
            </div>
            <div class="review-card card-rate">
              <div class="review-card-icon">
                <i class="ph ph-percent"></i>
              </div>
              <div class="review-card-content">
                <span class="review-card-label">Taxa de Poupan√ßa</span>
                <span class="review-card-value" id="reviewSavingsRate">0%</span>
              </div>
            </div>
            <div class="review-card card-transactions">
              <div class="review-card-icon">
                <i class="ph ph-swap"></i>
              </div>
              <div class="review-card-content">
                <span class="review-card-label">Transa√ß√µes</span>
                <span class="review-card-value" id="reviewTransactions">0</span>
              </div>
            </div>
            <div class="review-card card-average">
              <div class="review-card-icon">
                <i class="ph ph-calendar-check"></i>
              </div>
              <div class="review-card-content">
                <span class="review-card-label">Gasto M√©dio/Dia</span>
                <span class="review-card-value" id="reviewAvgDaily">R$ 0,00</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Principais Categorias -->
        <div class="review-section">
          <div class="review-section-header">
            <i class="ph ph-chart-pie"></i>
            <h3>Principais Categorias</h3>
          </div>
          <div class="review-categories" id="reviewCategories">
            <div class="review-empty">Nenhuma categoria registrada</div>
          </div>
        </div>

        <!-- Comparativo Mensal -->
        <div class="review-section">
          <div class="review-section-header">
            <i class="ph ph-chart-line"></i>
            <h3>Comparativo (3 meses)</h3>
          </div>
          <div class="review-chart-container">
            <canvas id="reviewComparisonChart" height="200"></canvas>
          </div>
        </div>

        <!-- Insights e Alertas -->
        <div class="review-section">
          <div class="review-section-header">
            <i class="ph ph-lightbulb"></i>
            <h3>Insights do M√™s</h3>
          </div>
          <div class="review-insights" id="reviewInsights">
            <div class="review-insight insight-neutral">
              <i class="ph ph-info"></i>
              <p>Analisando seus dados...</p>
            </div>
          </div>
        </div>
      </div>

      <div class="monthly-review-footer">
        <button class="btn-secondary" onclick="closeMonthlyReview()">
          <i class="ph ph-x"></i>
          Fechar
        </button>
        <button class="btn-secondary" onclick="exportMonthlyReviewPDF()">
          <i class="ph ph-file-pdf"></i>
          Exportar PDF
        </button>
        <button class="btn-primary" onclick="openReportsSection()">
          <i class="ph ph-file-text"></i>
          Ver Relat√≥rio Completo
        </button>
      </div>
    </div>
  </div>

  <!-- Modal Detalhes de Parcelas -->
  <div id="installmentDetailsModal" class="modal">
    <div class="modal-content installment-modal-minimal">
      <div class="installment-modal-header">
        <h2 id="installmentDetailsTitle">Detalhes da Despesa</h2>
        <span class="close" onclick="document.getElementById('installmentDetailsModal').classList.remove('show')">&times;</span>
      </div>
      
      <div class="installment-modal-body">
        <!-- Informa√ß√µes principais em linha -->
        <div class="installment-summary">
          <div class="summary-item">
            <span class="summary-label">Categoria</span>
            <span class="summary-value" id="installmentDetailsCategory">-</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Valor Total</span>
            <span class="summary-value strong" id="installmentDetailsTotalValue">R$ 0,00</span>
          </div>
          <div class="summary-item">
            <span class="summary-label">Por Parcela</span>
            <span class="summary-value" id="installmentDetailsInstallmentValue">R$ 0,00</span>
          </div>
        </div>

        <!-- Status das parcelas -->
        <div class="installment-status-bar">
          <div class="status-item">
            <span class="status-number" id="installmentDetailsPaidCount">0</span>
            <span class="status-label">Pagas</span>
          </div>
          <div class="status-divider"></div>
          <div class="status-item">
            <span class="status-number pending" id="installmentDetailsPendingCount">0</span>
            <span class="status-label">Pendentes</span>
          </div>
          <div class="status-divider"></div>
          <div class="status-item">
            <span class="status-number" id="installmentDetailsTotalCount">0</span>
            <span class="status-label">Total</span>
          </div>
        </div>

        <!-- Listas de parcelas -->
        <div class="installment-sections">
          <div class="installment-section" id="paidSection">
            <h3 class="section-title paid" onclick="toggleInstallmentSection('paidSection')">
              <span class="title-content">
                <i class="ph ph-check-circle"></i> Parcelas Pagas
              </span>
              <i class="ph ph-caret-down toggle-icon"></i>
            </h3>
            <div id="installmentDetailsPaidList" class="section-list">
              <div class="empty-message">Nenhuma parcela paga</div>
            </div>
          </div>

          <div class="installment-section" id="pendingSection">
            <h3 class="section-title pending" onclick="toggleInstallmentSection('pendingSection')">
              <span class="title-content">
                <i class="ph ph-clock"></i> Parcelas Pendentes
              </span>
              <i class="ph ph-caret-down toggle-icon"></i>
            </h3>
            <div id="installmentDetailsPendingList" class="section-list">
              <div class="empty-message">Nenhuma parcela pendente</div>
            </div>
          </div>
        </div>

        <!-- Bot√µes de a√ß√£o -->
        <div class="installment-actions">
          <button class="btn-installment edit" onclick="editInstallmentGroup()">
            <i class="ph ph-pencil-simple"></i>
            Editar
          </button>
          <button class="btn-installment delete" onclick="confirmDeleteInstallment()">
            <i class="ph ph-trash"></i>
            Excluir
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Confirma√ß√£o Exclus√£o de Parcela -->
  <div id="deleteInstallmentModal" class="modal">
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h2>Excluir Despesa Parcelada</h2>
        <span class="close" onclick="closeModal('deleteInstallmentModal')">&times;</span>
      </div>
      <div class="modal-body">
        <p class="modal-message">
          <i class="ph ph-warning-circle"></i>
          O que voc√™ deseja excluir?
        </p>
        <div class="delete-options">
          <button class="btn-delete-option btn-delete-single" onclick="deleteInstallmentOption('single')">
            <i class="ph ph-file-minus"></i>
            <span>Apenas a parcela atual</span>
            <small id="deleteCurrentInstallment">Parcela 1/12</small>
          </button>
          <button class="btn-delete-option btn-delete-all" onclick="deleteInstallmentOption('all')">
            <i class="ph ph-files-minus"></i>
            <span>Todas as parcelas</span>
            <small id="deleteAllInstallments">12 parcelas restantes</small>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Todos os Lembretes -->
  <div id="allRemindersModal" class="modal">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h2><i class="ph ph-bell-ringing"></i> Todos os Lembretes</h2>
        <span class="close" onclick="closeModal('allRemindersModal')">&times;</span>
      </div>
      <div class="modal-body">
        <div class="reminders-actions">
          <button class="btn-mark-all-read" onclick="markAllRemindersAsRead()">
            <i class="ph ph-checks"></i>
            Marcar todos como lidos
          </button>
        </div>
        <div id="remindersGridFull" class="reminders-grid">
          <!-- Preenchido via JavaScript -->
        </div>
        <div id="noRemindersMessage" class="no-items-message" style="display: none;">
          <i class="ph ph-check-circle"></i>
          <h3>Tudo em dia!</h3>
          <p>Voc√™ n√£o tem lembretes pendentes no momento</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Detalhes de Despesas Fixas -->
  <!-- Modal Detalhes de Despesa Fixa -->
  <div id="fixedDetailsModal" class="modal">
    <div class="modal-content installment-modal-minimal">
      <div class="installment-modal-header">
        <h2 id="fixedDetailsTitle">Detalhes da Despesa Fixa</h2>
        <span class="close" onclick="document.getElementById('fixedDetailsModal').classList.remove('show')">&times;</span>
      </div>
      
      <div class="installment-modal-body">
        <!-- Resumo compacto em grid -->
        <div class="fixed-summary-grid">
          <div class="fixed-summary-card highlight">
            <div class="summary-icon">
              <i class="ph ph-currency-circle-dollar"></i>
            </div>
            <div class="summary-info">
              <span class="summary-label">Valor Mensal</span>
              <span class="summary-value strong" id="fixedDetailsValue">R$ 0,00</span>
            </div>
          </div>
          
          <div class="fixed-summary-card no-icon">
            <div class="summary-info">
              <span class="summary-label">Per√≠odo Ativo</span>
              <span class="summary-value" id="fixedDetailsPeriod">-</span>
            </div>
          </div>
        </div>

        <!-- Status dos pagamentos -->
        <div class="installment-status-bar">
          <div class="status-item">
            <span class="status-number" id="fixedDetailsPaidCount">0</span>
            <span class="status-label">Pagos</span>
          </div>
          <div class="status-divider"></div>
          <div class="status-item">
            <span class="status-number pending" id="fixedDetailsPendingCount">0</span>
            <span class="status-label">Pendentes</span>
          </div>
          <div class="status-divider"></div>
          <div class="status-item">
            <span class="status-number" id="fixedDetailsTotalCount">0</span>
            <span class="status-label">Total</span>
          </div>
        </div>

        <!-- Listas de pagamentos -->
        <div class="installment-sections">
          <div class="installment-section" id="fixedPaidSection">
            <h3 class="section-title paid" onclick="toggleInstallmentSection('fixedPaidSection')">
              <span class="title-content">
                <i class="ph ph-check-circle"></i> Pagamentos Realizados
              </span>
              <i class="ph ph-caret-down toggle-icon"></i>
            </h3>
            <div id="fixedDetailsPaidList" class="section-list">
              <div class="empty-message">Nenhum pagamento realizado</div>
            </div>
          </div>

          <div class="installment-section" id="fixedPendingSection">
            <h3 class="section-title pending" onclick="toggleInstallmentSection('fixedPendingSection')">
              <span class="title-content">
                <i class="ph ph-clock"></i> Pr√≥ximos Pagamentos
              </span>
              <i class="ph ph-caret-down toggle-icon"></i>
            </h3>
            <div id="fixedDetailsPendingList" class="section-list">
              <div class="empty-message">Nenhum pagamento pendente</div>
            </div>
          </div>
        </div>

        <!-- Bot√µes de a√ß√£o -->
        <div class="installment-actions">
          <button class="btn-installment edit" onclick="editFixedGroup()">
            <i class="ph ph-pencil-simple"></i>
            Editar
          </button>
          <button class="btn-installment delete" onclick="confirmDeleteFixed()">
            <i class="ph ph-trash"></i>
            Excluir
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Detalhes de Despesa √önica -->
  <div id="singleExpenseModal" class="modal">
    <div class="modal-content installment-modal-minimal">
      <div class="installment-modal-header">
        <h2 id="singleExpenseTitle">Detalhes da Despesa</h2>
        <span class="close" onclick="document.getElementById('singleExpenseModal').classList.remove('show')">&times;</span>
      </div>
      
      <div class="installment-modal-body">
        <!-- Resumo compacto -->
        <div class="single-expense-summary">
          <div class="summary-row">
            <span class="summary-label">Categoria</span>
            <span class="summary-value" id="singleExpenseCategory">-</span>
          </div>
          <div class="summary-row">
            <span class="summary-label">Data</span>
            <span class="summary-value" id="singleExpenseDate">-</span>
          </div>
          <div class="summary-row highlight">
            <span class="summary-label">Valor</span>
            <span class="summary-value strong" id="singleExpenseValue">R$ 0,00</span>
          </div>
        </div>

        <!-- Bot√µes de a√ß√£o -->
        <div class="installment-actions">
          <button class="btn-installment edit" onclick="editSingleExpense()">
            <i class="ph ph-pencil-simple"></i>
            Editar
          </button>
          <button class="btn-installment delete" onclick="confirmDeleteSingle()">
            <i class="ph ph-trash"></i>
            Excluir
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- ===================================
       MOBILE BOTTOM NAVIGATION (AppBar)
       =================================== -->
  <nav class="mobile-bottom-nav hidden">
    <button class="nav-item" data-section="reports" onclick="showSectionMobile(event, 'reports')">
      <i class="ph ph-chart-bar"></i>
      <span>Relat√≥rios</span>
    </button>
    
    <button class="nav-item" data-section="transactions" onclick="showSectionMobile(event, 'transactions')">
      <i class="ph ph-arrows-left-right"></i>
      <span>Transa√ß√µes</span>
    </button>
    
    <button class="nav-item nav-item-center active" data-section="overview" onclick="showSectionMobile(event, 'overview')">
      <i class="ph ph-house"></i>
      <span>In√≠cio</span>
    </button>
    
    <button class="nav-item" data-section="todos" onclick="showSectionMobile(event, 'todos')">
      <i class="ph ph-note-pencil"></i>
      <span>A Registrar</span>
      <span class="nav-badge" id="todoBadge" style="display: none;">0</span>
    </button>
    
    <button class="nav-item" data-section="help" onclick="showSectionMobile(event, 'help')">
      <i class="ph ph-question"></i>
      <span>Ajuda</span>
    </button>
  </nav>

  <!-- Menu "Mais" (Mobile) -->
  <div class="mobile-more-menu hidden" id="mobileMoreMenu">
    <div class="more-menu-backdrop" onclick="toggleMobileMoreMenu()"></div>
    <div class="more-menu-content">
      <div class="more-menu-header">
        <h3>Ajuda e Mais</h3>
        <button onclick="toggleMobileMoreMenu()" class="btn-close-more">
          <i class="ph ph-x"></i>
        </button>
      </div>
      <div class="more-menu-items">
        <button class="more-menu-item" onclick="showSectionFromMore('calendar')">
          <i class="ph ph-calendar"></i>
          <span>Calend√°rio</span>
        </button>
        <button class="more-menu-item" onclick="showSectionFromMore('simulators')">
          <i class="ph ph-calculator"></i>
          <span>Simuladores</span>
        </button>
        <button class="more-menu-item" onclick="showSectionFromMore('education')">
          <i class="ph ph-book-open"></i>
          <span>Aprenda</span>
        </button>
        <button class="more-menu-item" onclick="showSectionFromMore('help')">
          <i class="ph ph-question"></i>
          <span>Ajuda</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Confirmation Popup -->
  <div id="deleteConfirmPopup" class="confirm-popup-overlay">
    <div class="confirm-popup">
      <div class="confirm-popup-icon">
        <i class="ph ph-warning-circle"></i>
      </div>
      <h3 class="confirm-popup-title" id="confirmPopupTitle">Confirmar Exclus√£o</h3>
      <p class="confirm-popup-message" id="confirmPopupMessage">Tem certeza que deseja excluir?</p>
      <div class="confirm-popup-actions">
        <button class="btn-confirm-cancel" onclick="closeDeleteConfirmPopup()">
          <i class="ph ph-x"></i>
          Cancelar
        </button>
        <button class="btn-confirm-delete" id="confirmDeleteBtn">
          <i class="ph ph-trash"></i>
          Excluir
        </button>
      </div>
    </div>
  </div>
  
  <!-- Main Dashboard Script -->
  <script src="script.js?v=20251111001"></script>  <!-- ‚úÖ Fix: Campo √∫ltima data parcelas + remove (X/Y) -->
  <script>
    // Remove qualquer meta theme-color existente e recria com preto
    document.addEventListener('DOMContentLoaded', function() {
      const existingMeta = document.querySelectorAll('meta[name="theme-color"]');
      existingMeta.forEach(meta => meta.remove());
      
      const meta = document.createElement('meta');
      meta.name = 'theme-color';
      meta.content = '#000000';
      document.head.appendChild(meta);
      
      // Monitora mudan√ßas e for√ßa preto sempre
      setInterval(function() {
        const currentMeta = document.querySelector('meta[name="theme-color"]');
        if (currentMeta && currentMeta.content !== '#000000') {
          currentMeta.content = '#000000';
        }
      }, 100);
    });
  </script>
</body>
</html>




